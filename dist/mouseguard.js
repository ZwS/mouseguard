var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardEditor.esbuild-svelte-fake-css
var require_ = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardEditor.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseDetails.esbuild-svelte-fake-css
var require_2 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseDetails.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseRewards.esbuild-svelte-fake-css
var require_3 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseRewards.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseAbilities.esbuild-svelte-fake-css
var require_4 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseAbilities.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseSkills.esbuild-svelte-fake-css
var require_5 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseSkills.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseWises.esbuild-svelte-fake-css
var require_6 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseWises.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseTraits.esbuild-svelte-fake-css
var require_7 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseTraits.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseSkillAbilityTab.esbuild-svelte-fake-css
var require_8 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseSkillAbilityTab.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseDispo.esbuild-svelte-fake-css
var require_9 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseDispo.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMousePortrait.esbuild-svelte-fake-css
var require_10 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMousePortrait.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseName.esbuild-svelte-fake-css
var require_11 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetMouseName.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetBase.esbuild-svelte-fake-css
var require_12 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetBase.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetHeader.esbuild-svelte-fake-css
var require_13 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardActorSheetHeader.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardNPCActorSheetBody.esbuild-svelte-fake-css
var require_14 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardNPCActorSheetBody.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardNPCActorSheetBase.esbuild-svelte-fake-css
var require_15 = __commonJS({
  "fakecss:D:/FoundryData/Data/systems/mouseguard/module/svelte/MouseGuardNPCActorSheetBase.esbuild-svelte-fake-css"(exports, module) {
    module.exports = {};
  }
});

// module/actor.js
var MouseGuardActor = class extends Actor {
  prepareDerivedData() {
    super.prepareDerivedData();
  }
  prepareData() {
    super.prepareData();
    this._prepareCharacterData(this);
  }
  _prepareCharacterData(actorData) {
    this.system.itemTypes = this.itemTypes;
  }
  async _preCreate(data, options, user) {
    await super._preCreate(data, options, user);
    const abilities = [];
    let create_ability;
    if ((data.type === "character" || data.type === "mouse") && this.itemTypes.ability.length <= 0) {
      create_ability = [
        "MOUSEGUARD.MNature",
        "MOUSEGUARD.Will",
        "MOUSEGUARD.Health",
        "MOUSEGUARD.Resources",
        "MOUSEGUARD.Circles"
      ];
    } else if (data.type === "weasel" && this.itemTypes.ability.length <= 0) {
      create_ability = [
        "MOUSEGUARD.WNature",
        "MOUSEGUARD.Will",
        "MOUSEGUARD.Health",
        "MOUSEGUARD.Resources",
        "MOUSEGUARD.Circles"
      ];
    } else if (data.type === "animal" && this.itemTypes.ability.length <= 0) {
      create_ability = [
        game.i18n.localize("MOUSEGUARD.Nature") + " (" + data.name + ")"
      ];
    }
    if (Object(create_ability).length > 0) {
      for (let i of create_ability) {
        abilities.push({
          name: i,
          type: "ability"
        });
      }
      this.updateSource({
        items: abilities,
        img: "systems/mouseguard/assets/icons/seated-mouse.svg"
      });
    }
  }
};

// module/item.js
var MouseGuardItem = class extends Item {
  prepareDerivedData() {
    super.prepareDerivedData();
    this.system.groups = this.system.groups || {};
    this.system.attributes = this.system.attributes || {};
  }
};

// module/item-sheet.js
var MouseGuardItemSheet = class extends ItemSheet {
  static get defaultOptions() {
    return foundry.utils.mergeObject(super.defaultOptions, {
      classes: ["mouseguard", "sheet", "item"],
      template: "systems/mouseguard/templates/item-sheet.html",
      width: 520,
      height: 480,
      tabs: [
        {
          navSelector: ".sheet-tabs",
          contentSelector: ".sheet-body",
          initial: "description"
        }
      ],
      scrollY: [".attributes"]
    });
  }
  getData() {
    const context = super.getData();
    context.systemData = context.item.system;
    return context;
  }
  async activateListeners(html) {
    super.activateListeners(html);
  }
  async _getSubmitData(updateData) {
    let formData = super._getSubmitData(updateData);
    return formData;
  }
};

// node_modules/svelte/internal/index.mjs
function noop() {
}
function run(fn) {
  return fn();
}
function blank_object() {
  return Object.create(null);
}
function run_all(fns) {
  fns.forEach(run);
}
function is_function(thing) {
  return typeof thing === "function";
}
function safe_not_equal(a, b) {
  return a != a ? b == b : a !== b || (a && typeof a === "object" || typeof a === "function");
}
function is_empty(obj) {
  return Object.keys(obj).length === 0;
}
function subscribe(store, ...callbacks) {
  if (store == null) {
    return noop;
  }
  const unsub = store.subscribe(...callbacks);
  return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;
}
function component_subscribe(component, store, callback) {
  component.$$.on_destroy.push(subscribe(store, callback));
}
var tasks = new Set();
var is_hydrating = false;
function start_hydrating() {
  is_hydrating = true;
}
function end_hydrating() {
  is_hydrating = false;
}
function upper_bound(low, high, key, value) {
  while (low < high) {
    const mid = low + (high - low >> 1);
    if (key(mid) <= value) {
      low = mid + 1;
    } else {
      high = mid;
    }
  }
  return low;
}
function init_hydrate(target) {
  if (target.hydrate_init)
    return;
  target.hydrate_init = true;
  const children2 = target.childNodes;
  const m = new Int32Array(children2.length + 1);
  const p = new Int32Array(children2.length);
  m[0] = -1;
  let longest = 0;
  for (let i = 0; i < children2.length; i++) {
    const current = children2[i].claim_order;
    const seqLen = upper_bound(1, longest + 1, (idx) => children2[m[idx]].claim_order, current) - 1;
    p[i] = m[seqLen] + 1;
    const newLen = seqLen + 1;
    m[newLen] = i;
    longest = Math.max(newLen, longest);
  }
  const lis = [];
  const toMove = [];
  let last = children2.length - 1;
  for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {
    lis.push(children2[cur - 1]);
    for (; last >= cur; last--) {
      toMove.push(children2[last]);
    }
    last--;
  }
  for (; last >= 0; last--) {
    toMove.push(children2[last]);
  }
  lis.reverse();
  toMove.sort((a, b) => a.claim_order - b.claim_order);
  for (let i = 0, j = 0; i < toMove.length; i++) {
    while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {
      j++;
    }
    const anchor = j < lis.length ? lis[j] : null;
    target.insertBefore(toMove[i], anchor);
  }
}
function append(target, node) {
  if (is_hydrating) {
    init_hydrate(target);
    if (target.actual_end_child === void 0 || target.actual_end_child !== null && target.actual_end_child.parentElement !== target) {
      target.actual_end_child = target.firstChild;
    }
    if (node !== target.actual_end_child) {
      target.insertBefore(node, target.actual_end_child);
    } else {
      target.actual_end_child = node.nextSibling;
    }
  } else if (node.parentNode !== target) {
    target.appendChild(node);
  }
}
function insert(target, node, anchor) {
  if (is_hydrating && !anchor) {
    append(target, node);
  } else if (node.parentNode !== target || anchor && node.nextSibling !== anchor) {
    target.insertBefore(node, anchor || null);
  }
}
function detach(node) {
  if (node.parentNode) {
    node.parentNode.removeChild(node);
  }
}
function destroy_each(iterations, detaching) {
  for (let i = 0; i < iterations.length; i += 1) {
    if (iterations[i])
      iterations[i].d(detaching);
  }
}
function element(name) {
  return document.createElement(name);
}
function text(data) {
  return document.createTextNode(data);
}
function space() {
  return text(" ");
}
function empty() {
  return text("");
}
function listen(node, event, handler, options) {
  node.addEventListener(event, handler, options);
  return () => node.removeEventListener(event, handler, options);
}
function prevent_default(fn) {
  return function(event) {
    event.preventDefault();
    return fn.call(this, event);
  };
}
function attr(node, attribute, value) {
  if (value == null)
    node.removeAttribute(attribute);
  else if (node.getAttribute(attribute) !== value)
    node.setAttribute(attribute, value);
}
function children(element2) {
  return Array.from(element2.childNodes);
}
function set_data(text2, data) {
  data = "" + data;
  if (text2.wholeText !== data)
    text2.data = data;
}
var crossorigin;
function is_crossorigin() {
  if (crossorigin === void 0) {
    crossorigin = false;
    try {
      if (typeof window !== "undefined" && window.parent) {
        void window.parent.document;
      }
    } catch (error) {
      crossorigin = true;
    }
  }
  return crossorigin;
}
function add_resize_listener(node, fn) {
  const computed_style = getComputedStyle(node);
  if (computed_style.position === "static") {
    node.style.position = "relative";
  }
  const iframe = element("iframe");
  iframe.setAttribute("style", "display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;");
  iframe.setAttribute("aria-hidden", "true");
  iframe.tabIndex = -1;
  const crossorigin2 = is_crossorigin();
  let unsubscribe;
  if (crossorigin2) {
    iframe.src = "data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>";
    unsubscribe = listen(window, "message", (event) => {
      if (event.source === iframe.contentWindow)
        fn();
    });
  } else {
    iframe.src = "about:blank";
    iframe.onload = () => {
      unsubscribe = listen(iframe.contentWindow, "resize", fn);
    };
  }
  append(node, iframe);
  return () => {
    if (crossorigin2) {
      unsubscribe();
    } else if (unsubscribe && iframe.contentWindow) {
      unsubscribe();
    }
    detach(iframe);
  };
}
var active_docs = new Set();
var current_component;
function set_current_component(component) {
  current_component = component;
}
function get_current_component() {
  if (!current_component)
    throw new Error("Function called outside component initialization");
  return current_component;
}
function onDestroy(fn) {
  get_current_component().$$.on_destroy.push(fn);
}
function setContext(key, context) {
  get_current_component().$$.context.set(key, context);
}
function getContext(key) {
  return get_current_component().$$.context.get(key);
}
var dirty_components = [];
var binding_callbacks = [];
var render_callbacks = [];
var flush_callbacks = [];
var resolved_promise = Promise.resolve();
var update_scheduled = false;
function schedule_update() {
  if (!update_scheduled) {
    update_scheduled = true;
    resolved_promise.then(flush);
  }
}
function add_render_callback(fn) {
  render_callbacks.push(fn);
}
var flushing = false;
var seen_callbacks = new Set();
function flush() {
  if (flushing)
    return;
  flushing = true;
  do {
    for (let i = 0; i < dirty_components.length; i += 1) {
      const component = dirty_components[i];
      set_current_component(component);
      update(component.$$);
    }
    set_current_component(null);
    dirty_components.length = 0;
    while (binding_callbacks.length)
      binding_callbacks.pop()();
    for (let i = 0; i < render_callbacks.length; i += 1) {
      const callback = render_callbacks[i];
      if (!seen_callbacks.has(callback)) {
        seen_callbacks.add(callback);
        callback();
      }
    }
    render_callbacks.length = 0;
  } while (dirty_components.length);
  while (flush_callbacks.length) {
    flush_callbacks.pop()();
  }
  update_scheduled = false;
  flushing = false;
  seen_callbacks.clear();
}
function update($$) {
  if ($$.fragment !== null) {
    $$.update();
    run_all($$.before_update);
    const dirty = $$.dirty;
    $$.dirty = [-1];
    $$.fragment && $$.fragment.p($$.ctx, dirty);
    $$.after_update.forEach(add_render_callback);
  }
}
var outroing = new Set();
var outros;
function group_outros() {
  outros = {
    r: 0,
    c: [],
    p: outros
  };
}
function check_outros() {
  if (!outros.r) {
    run_all(outros.c);
  }
  outros = outros.p;
}
function transition_in(block, local) {
  if (block && block.i) {
    outroing.delete(block);
    block.i(local);
  }
}
function transition_out(block, local, detach2, callback) {
  if (block && block.o) {
    if (outroing.has(block))
      return;
    outroing.add(block);
    outros.c.push(() => {
      outroing.delete(block);
      if (callback) {
        if (detach2)
          block.d(1);
        callback();
      }
    });
    block.o(local);
  }
}
var globals = typeof window !== "undefined" ? window : typeof globalThis !== "undefined" ? globalThis : global;
var boolean_attributes = new Set([
  "allowfullscreen",
  "allowpaymentrequest",
  "async",
  "autofocus",
  "autoplay",
  "checked",
  "controls",
  "default",
  "defer",
  "disabled",
  "formnovalidate",
  "hidden",
  "ismap",
  "loop",
  "multiple",
  "muted",
  "nomodule",
  "novalidate",
  "open",
  "playsinline",
  "readonly",
  "required",
  "reversed",
  "selected"
]);
function create_component(block) {
  block && block.c();
}
function mount_component(component, target, anchor, customElement) {
  const { fragment, on_mount, on_destroy, after_update } = component.$$;
  fragment && fragment.m(target, anchor);
  if (!customElement) {
    add_render_callback(() => {
      const new_on_destroy = on_mount.map(run).filter(is_function);
      if (on_destroy) {
        on_destroy.push(...new_on_destroy);
      } else {
        run_all(new_on_destroy);
      }
      component.$$.on_mount = [];
    });
  }
  after_update.forEach(add_render_callback);
}
function destroy_component(component, detaching) {
  const $$ = component.$$;
  if ($$.fragment !== null) {
    run_all($$.on_destroy);
    $$.fragment && $$.fragment.d(detaching);
    $$.on_destroy = $$.fragment = null;
    $$.ctx = [];
  }
}
function make_dirty(component, i) {
  if (component.$$.dirty[0] === -1) {
    dirty_components.push(component);
    schedule_update();
    component.$$.dirty.fill(0);
  }
  component.$$.dirty[i / 31 | 0] |= 1 << i % 31;
}
function init(component, options, instance15, create_fragment16, not_equal, props, dirty = [-1]) {
  const parent_component = current_component;
  set_current_component(component);
  const $$ = component.$$ = {
    fragment: null,
    ctx: null,
    props,
    update: noop,
    not_equal,
    bound: blank_object(),
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(parent_component ? parent_component.$$.context : options.context || []),
    callbacks: blank_object(),
    dirty,
    skip_bound: false
  };
  let ready = false;
  $$.ctx = instance15 ? instance15(component, options.props || {}, (i, ret, ...rest) => {
    const value = rest.length ? rest[0] : ret;
    if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {
      if (!$$.skip_bound && $$.bound[i])
        $$.bound[i](value);
      if (ready)
        make_dirty(component, i);
    }
    return ret;
  }) : [];
  $$.update();
  ready = true;
  run_all($$.before_update);
  $$.fragment = create_fragment16 ? create_fragment16($$.ctx) : false;
  if (options.target) {
    if (options.hydrate) {
      start_hydrating();
      const nodes = children(options.target);
      $$.fragment && $$.fragment.l(nodes);
      nodes.forEach(detach);
    } else {
      $$.fragment && $$.fragment.c();
    }
    if (options.intro)
      transition_in(component.$$.fragment);
    mount_component(component, options.target, options.anchor, options.customElement);
    end_hydrating();
    flush();
  }
  set_current_component(parent_component);
}
var SvelteElement;
if (typeof HTMLElement === "function") {
  SvelteElement = class extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({ mode: "open" });
    }
    connectedCallback() {
      const { on_mount } = this.$$;
      this.$$.on_disconnect = on_mount.map(run).filter(is_function);
      for (const key in this.$$.slotted) {
        this.appendChild(this.$$.slotted[key]);
      }
    }
    attributeChangedCallback(attr2, _oldValue, newValue) {
      this[attr2] = newValue;
    }
    disconnectedCallback() {
      run_all(this.$$.on_disconnect);
    }
    $destroy() {
      destroy_component(this, 1);
      this.$destroy = noop;
    }
    $on(type, callback) {
      const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);
      callbacks.push(callback);
      return () => {
        const index = callbacks.indexOf(callback);
        if (index !== -1)
          callbacks.splice(index, 1);
      };
    }
    $set($$props) {
      if (this.$$set && !is_empty($$props)) {
        this.$$.skip_bound = true;
        this.$$set($$props);
        this.$$.skip_bound = false;
      }
    }
  };
}
var SvelteComponent = class {
  $destroy() {
    destroy_component(this, 1);
    this.$destroy = noop;
  }
  $on(type, callback) {
    const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);
    callbacks.push(callback);
    return () => {
      const index = callbacks.indexOf(callback);
      if (index !== -1)
        callbacks.splice(index, 1);
    };
  }
  $set($$props) {
    if (this.$$set && !is_empty($$props)) {
      this.$$.skip_bound = true;
      this.$$set($$props);
      this.$$.skip_bound = false;
    }
  }
};

// module/svelte/MouseGuardEditor.svelte
function create_if_block(ctx) {
  let a;
  let mounted;
  let dispose;
  return {
    c() {
      a = element("a");
      a.innerHTML = `<i class="fas fa-edit"></i>`;
      attr(a, "class", "editor-edit");
    },
    m(target, anchor) {
      insert(target, a, anchor);
      if (!mounted) {
        dispose = listen(a, "click", prevent_default(ctx[6]));
        mounted = true;
      }
    },
    p: noop,
    d(detaching) {
      if (detaching)
        detach(a);
      mounted = false;
      dispose();
    }
  };
}
function create_fragment(ctx) {
  let div1;
  let span;
  let t0;
  let div0;
  let div0_resize_listener;
  let t1;
  let if_block = ctx[1].editable && create_if_block(ctx);
  return {
    c() {
      div1 = element("div");
      span = element("span");
      t0 = space();
      div0 = element("div");
      t1 = space();
      if (if_block)
        if_block.c();
      attr(div0, "class", "editor-content svelte-1ccthvk");
      attr(div0, "data-edit", ctx[0]);
      add_render_callback(() => ctx[9].call(div0));
      attr(div1, "class", "editor svelte-1ccthvk");
    },
    m(target, anchor) {
      insert(target, div1, anchor);
      append(div1, span);
      append(div1, t0);
      append(div1, div0);
      div0.innerHTML = ctx[4];
      ctx[8](div0);
      div0_resize_listener = add_resize_listener(div0, ctx[9].bind(div0));
      append(div1, t1);
      if (if_block)
        if_block.m(div1, null);
    },
    p(ctx2, [dirty]) {
      if (dirty & 16)
        div0.innerHTML = ctx2[4];
      ;
      if (dirty & 1) {
        attr(div0, "data-edit", ctx2[0]);
      }
      if (ctx2[1].editable) {
        if (if_block) {
          if_block.p(ctx2, dirty);
        } else {
          if_block = create_if_block(ctx2);
          if_block.c();
          if_block.m(div1, null);
        }
      } else if (if_block) {
        if_block.d(1);
        if_block = null;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(div1);
      ctx[8](null);
      div0_resize_listener();
      if (if_block)
        if_block.d();
    }
  };
}
function instance($$self, $$props, $$invalidate) {
  let $sheetData;
  let { target } = $$props;
  let sheetData = getContext("sheetStore");
  component_subscribe($$self, sheetData, (value) => $$invalidate(1, $sheetData = value));
  let data;
  const TextEditor = globalThis.TextEditor;
  let editorContent;
  let height;
  let mce;
  let rawContent = getProperty($sheetData?.data, target) ?? "";
  let content = TextEditor.enrichHTML(rawContent, {
    secrets: $sheetData.isOwner,
    async: false
  });
  let editor = {};
  onDestroy(async () => {
    if (mce)
      mce.destroy();
  });
  const createEditor = async () => {
    TextEditor.create({
      target: editorContent,
      invalid_elements: "iframe",
      save_onsavecallback: async (m) => {
        mce = m;
        const isDirty = mce.getContent() !== editor.initial;
        mce.remove();
        if (isDirty) {
          await $sheetData.sheet._onSubmit(new Event("submit"));
        }
        mce.destroy();
      }
    }).then((m) => {
      editor.m = m;
      mce = m;
      editor.changed = false;
      editor.active = true;
      mce.focus();
      mce.on("change", (ev) => editor.changed = true);
    });
  };
  function div0_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      editorContent = $$value;
      $$invalidate(2, editorContent);
    });
  }
  function div0_elementresize_handler() {
    height = this.clientHeight;
    $$invalidate(3, height);
  }
  $$self.$$set = ($$props2) => {
    if ("target" in $$props2)
      $$invalidate(0, target = $$props2.target);
  };
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 2) {
      $:
        data = $sheetData.data;
    }
    if ($$self.$$.dirty & 131) {
      $: {
        $$invalidate(7, rawContent = getProperty($sheetData?.data, target));
        $$invalidate(4, content = TextEditor.enrichHTML(rawContent, {
          secrets: $sheetData.isOwner,
          async: false
        }));
      }
    }
  };
  return [
    target,
    $sheetData,
    editorContent,
    height,
    content,
    sheetData,
    createEditor,
    rawContent,
    div0_binding,
    div0_elementresize_handler
  ];
}
var MouseGuardEditor = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance, create_fragment, safe_not_equal, { target: 0 });
  }
};
var MouseGuardEditor_default = MouseGuardEditor;
require_();

// module/svelte/MouseGuardActorSheetMouseDetails.svelte
function create_fragment2(ctx) {
  let largecard;
  let h10;
  let t1;
  let ul;
  let lineitem0;
  let label0;
  let t4;
  let input0;
  let input0_value_value;
  let t5;
  let lineitem1;
  let label1;
  let t8;
  let input1;
  let input1_value_value;
  let input1_placeholder_value;
  let t9;
  let lineitem2;
  let label2;
  let t12;
  let input2;
  let input2_value_value;
  let input2_placeholder_value;
  let t13;
  let lineitem3;
  let label3;
  let t16;
  let input3;
  let input3_value_value;
  let input3_placeholder_value;
  let t17;
  let lineitem4;
  let label4;
  let t20;
  let input4;
  let input4_value_value;
  let input4_placeholder_value;
  let t21;
  let lineitem5;
  let label5;
  let t24;
  let input5;
  let input5_value_value;
  let input5_placeholder_value;
  let t25;
  let lineitem6;
  let label6;
  let t28;
  let input6;
  let input6_value_value;
  let input6_placeholder_value;
  let t29;
  let lineitem7;
  let label7;
  let t32;
  let input7;
  let input7_value_value;
  let input7_placeholder_value;
  let t33;
  let lineitem8;
  let label8;
  let t36;
  let input8;
  let input8_value_value;
  let input8_placeholder_value;
  let t37;
  let lineitem9;
  let label9;
  let t40;
  let input9;
  let input9_value_value;
  let input9_placeholder_value;
  let t41;
  let h11;
  let t43;
  let mouseguardeditor;
  let current;
  mouseguardeditor = new MouseGuardEditor_default({ props: { target: "system.biography" } });
  return {
    c() {
      largecard = element("largecard");
      h10 = element("h1");
      h10.textContent = `${game.i18n.localize("MOUSEGUARD.About")}`;
      t1 = space();
      ul = element("ul");
      lineitem0 = element("lineitem");
      label0 = element("label");
      label0.textContent = `${game.i18n.localize("MOUSEGUARD.Age")}:`;
      t4 = space();
      input0 = element("input");
      t5 = space();
      lineitem1 = element("lineitem");
      label1 = element("label");
      label1.textContent = `${game.i18n.localize("MOUSEGUARD.Parents")}:`;
      t8 = space();
      input1 = element("input");
      t9 = space();
      lineitem2 = element("lineitem");
      label2 = element("label");
      label2.textContent = `${game.i18n.localize("MOUSEGUARD.Home")}:`;
      t12 = space();
      input2 = element("input");
      t13 = space();
      lineitem3 = element("lineitem");
      label3 = element("label");
      label3.textContent = `${game.i18n.localize("MOUSEGUARD.Senior")}:`;
      t16 = space();
      input3 = element("input");
      t17 = space();
      lineitem4 = element("lineitem");
      label4 = element("label");
      label4.textContent = `${game.i18n.localize("MOUSEGUARD.Fur")}:`;
      t20 = space();
      input4 = element("input");
      t21 = space();
      lineitem5 = element("lineitem");
      label5 = element("label");
      label5.textContent = `${game.i18n.localize("MOUSEGUARD.Mentor")}:`;
      t24 = space();
      input5 = element("input");
      t25 = space();
      lineitem6 = element("lineitem");
      label6 = element("label");
      label6.textContent = `${game.i18n.localize("MOUSEGUARD.Cloak")}:`;
      t28 = space();
      input6 = element("input");
      t29 = space();
      lineitem7 = element("lineitem");
      label7 = element("label");
      label7.textContent = `${game.i18n.localize("MOUSEGUARD.Friend")}:`;
      t32 = space();
      input7 = element("input");
      t33 = space();
      lineitem8 = element("lineitem");
      label8 = element("label");
      label8.textContent = `${game.i18n.localize("MOUSEGUARD.GuardRank")}:`;
      t36 = space();
      input8 = element("input");
      t37 = space();
      lineitem9 = element("lineitem");
      label9 = element("label");
      label9.textContent = `${game.i18n.localize("MOUSEGUARD.Enemy")}:`;
      t40 = space();
      input9 = element("input");
      t41 = space();
      h11 = element("h1");
      h11.textContent = `${game.i18n.localize("MOUSEGUARD.Bio")}`;
      t43 = space();
      create_component(mouseguardeditor.$$.fragment);
      attr(h10, "class", "svelte-i1yp9p");
      attr(label0, "class", "svelte-i1yp9p");
      attr(input0, "name", "system.details.age");
      attr(input0, "type", "number");
      input0.value = input0_value_value = ctx[0].system.details.age;
      attr(input0, "placeholder", "0");
      attr(input0, "class", "svelte-i1yp9p");
      attr(lineitem0, "class", "svelte-i1yp9p");
      attr(label1, "class", "svelte-i1yp9p");
      attr(input1, "name", "system.details.parents");
      attr(input1, "type", "text");
      input1.value = input1_value_value = ctx[0].system.details.parents;
      attr(input1, "placeholder", input1_placeholder_value = game.i18n.localize("MOUSEGUARD.Parents"));
      attr(input1, "class", "svelte-i1yp9p");
      attr(lineitem1, "class", "svelte-i1yp9p");
      attr(label2, "class", "svelte-i1yp9p");
      attr(input2, "name", "system.details.home");
      attr(input2, "type", "text");
      input2.value = input2_value_value = ctx[0].system.details.home;
      attr(input2, "placeholder", input2_placeholder_value = game.i18n.localize("MOUSEGUARD.Home"));
      attr(input2, "class", "svelte-i1yp9p");
      attr(lineitem2, "class", "svelte-i1yp9p");
      attr(label3, "class", "svelte-i1yp9p");
      attr(input3, "name", "system.details.senior_artisan");
      attr(input3, "type", "text");
      input3.value = input3_value_value = ctx[0].system.details.senior_artisan;
      attr(input3, "placeholder", input3_placeholder_value = game.i18n.localize("MOUSEGUARD.Senior"));
      attr(input3, "class", "svelte-i1yp9p");
      attr(lineitem3, "class", "svelte-i1yp9p");
      attr(label4, "class", "svelte-i1yp9p");
      attr(input4, "name", "system.details.fur_color");
      attr(input4, "type", "text");
      input4.value = input4_value_value = ctx[0].system.details.fur_color;
      attr(input4, "placeholder", input4_placeholder_value = game.i18n.localize("MOUSEGUARD.Fur"));
      attr(input4, "class", "svelte-i1yp9p");
      attr(lineitem4, "class", "svelte-i1yp9p");
      attr(label5, "class", "svelte-i1yp9p");
      attr(input5, "name", "system.details.mentor");
      attr(input5, "type", "text");
      input5.value = input5_value_value = ctx[0].system.details.mentor;
      attr(input5, "placeholder", input5_placeholder_value = game.i18n.localize("MOUSEGUARD.Mentor"));
      attr(input5, "class", "svelte-i1yp9p");
      attr(lineitem5, "class", "svelte-i1yp9p");
      attr(label6, "class", "svelte-i1yp9p");
      attr(input6, "name", "system.details.cloak_color");
      attr(input6, "type", "text");
      input6.value = input6_value_value = ctx[0].system.details.cloak_color;
      attr(input6, "placeholder", input6_placeholder_value = game.i18n.localize("MOUSEGUARD.Cloak"));
      attr(input6, "class", "svelte-i1yp9p");
      attr(lineitem6, "class", "svelte-i1yp9p");
      attr(label7, "class", "svelte-i1yp9p");
      attr(input7, "name", "system.details.friend");
      attr(input7, "type", "text");
      input7.value = input7_value_value = ctx[0].system.details.friend;
      attr(input7, "placeholder", input7_placeholder_value = game.i18n.localize("MOUSEGUARD.Friend"));
      attr(input7, "class", "svelte-i1yp9p");
      attr(lineitem7, "class", "svelte-i1yp9p");
      attr(label8, "class", "svelte-i1yp9p");
      attr(input8, "name", "system.details.guard_rank");
      attr(input8, "type", "text");
      input8.value = input8_value_value = ctx[0].system.details.guard_rank;
      attr(input8, "placeholder", input8_placeholder_value = game.i18n.localize("MOUSEGUARD.GuardRank"));
      attr(input8, "class", "svelte-i1yp9p");
      attr(lineitem8, "class", "svelte-i1yp9p");
      attr(label9, "class", "svelte-i1yp9p");
      attr(input9, "name", "system.details.enemy");
      attr(input9, "type", "text");
      input9.value = input9_value_value = ctx[0].system.details.enemy;
      attr(input9, "placeholder", input9_placeholder_value = game.i18n.localize("MOUSEGUARD.Enemy"));
      attr(input9, "class", "svelte-i1yp9p");
      attr(lineitem9, "class", "svelte-i1yp9p");
      attr(largecard, "class", "svelte-i1yp9p");
      attr(h11, "class", "svelte-i1yp9p");
    },
    m(target, anchor) {
      insert(target, largecard, anchor);
      append(largecard, h10);
      append(largecard, t1);
      append(largecard, ul);
      append(ul, lineitem0);
      append(lineitem0, label0);
      append(lineitem0, t4);
      append(lineitem0, input0);
      append(ul, t5);
      append(ul, lineitem1);
      append(lineitem1, label1);
      append(lineitem1, t8);
      append(lineitem1, input1);
      append(ul, t9);
      append(ul, lineitem2);
      append(lineitem2, label2);
      append(lineitem2, t12);
      append(lineitem2, input2);
      append(ul, t13);
      append(ul, lineitem3);
      append(lineitem3, label3);
      append(lineitem3, t16);
      append(lineitem3, input3);
      append(ul, t17);
      append(ul, lineitem4);
      append(lineitem4, label4);
      append(lineitem4, t20);
      append(lineitem4, input4);
      append(ul, t21);
      append(ul, lineitem5);
      append(lineitem5, label5);
      append(lineitem5, t24);
      append(lineitem5, input5);
      append(ul, t25);
      append(ul, lineitem6);
      append(lineitem6, label6);
      append(lineitem6, t28);
      append(lineitem6, input6);
      append(ul, t29);
      append(ul, lineitem7);
      append(lineitem7, label7);
      append(lineitem7, t32);
      append(lineitem7, input7);
      append(ul, t33);
      append(ul, lineitem8);
      append(lineitem8, label8);
      append(lineitem8, t36);
      append(lineitem8, input8);
      append(ul, t37);
      append(ul, lineitem9);
      append(lineitem9, label9);
      append(lineitem9, t40);
      append(lineitem9, input9);
      insert(target, t41, anchor);
      insert(target, h11, anchor);
      insert(target, t43, anchor);
      mount_component(mouseguardeditor, target, anchor);
      current = true;
    },
    p(ctx2, [dirty]) {
      if (!current || dirty & 1 && input0_value_value !== (input0_value_value = ctx2[0].system.details.age)) {
        input0.value = input0_value_value;
      }
      if (!current || dirty & 1 && input1_value_value !== (input1_value_value = ctx2[0].system.details.parents) && input1.value !== input1_value_value) {
        input1.value = input1_value_value;
      }
      if (!current || dirty & 1 && input2_value_value !== (input2_value_value = ctx2[0].system.details.home) && input2.value !== input2_value_value) {
        input2.value = input2_value_value;
      }
      if (!current || dirty & 1 && input3_value_value !== (input3_value_value = ctx2[0].system.details.senior_artisan) && input3.value !== input3_value_value) {
        input3.value = input3_value_value;
      }
      if (!current || dirty & 1 && input4_value_value !== (input4_value_value = ctx2[0].system.details.fur_color) && input4.value !== input4_value_value) {
        input4.value = input4_value_value;
      }
      if (!current || dirty & 1 && input5_value_value !== (input5_value_value = ctx2[0].system.details.mentor) && input5.value !== input5_value_value) {
        input5.value = input5_value_value;
      }
      if (!current || dirty & 1 && input6_value_value !== (input6_value_value = ctx2[0].system.details.cloak_color) && input6.value !== input6_value_value) {
        input6.value = input6_value_value;
      }
      if (!current || dirty & 1 && input7_value_value !== (input7_value_value = ctx2[0].system.details.friend) && input7.value !== input7_value_value) {
        input7.value = input7_value_value;
      }
      if (!current || dirty & 1 && input8_value_value !== (input8_value_value = ctx2[0].system.details.guard_rank) && input8.value !== input8_value_value) {
        input8.value = input8_value_value;
      }
      if (!current || dirty & 1 && input9_value_value !== (input9_value_value = ctx2[0].system.details.enemy) && input9.value !== input9_value_value) {
        input9.value = input9_value_value;
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(mouseguardeditor.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(mouseguardeditor.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(largecard);
      if (detaching)
        detach(t41);
      if (detaching)
        detach(h11);
      if (detaching)
        detach(t43);
      destroy_component(mouseguardeditor, detaching);
    }
  };
}
function instance2($$self, $$props, $$invalidate) {
  let $sheetData;
  let sheetData = getContext("sheetStore");
  component_subscribe($$self, sheetData, (value) => $$invalidate(2, $sheetData = value));
  let data;
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 4) {
      $:
        $$invalidate(0, data = $sheetData.data);
    }
  };
  return [data, sheetData, $sheetData];
}
var MouseGuardActorSheetMouseDetails = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance2, create_fragment2, safe_not_equal, {});
  }
};
var MouseGuardActorSheetMouseDetails_default = MouseGuardActorSheetMouseDetails;
require_2();

// module/svelte/MouseGuardActorSheetMouseRewards.svelte
function create_fragment3(ctx) {
  let largecard;
  let h1;
  let t1;
  let left;
  let fatebox;
  let label0;
  let t3;
  let input0;
  let input0_value_value;
  let t4;
  let personabox;
  let label1;
  let t6;
  let input1;
  let input1_value_value;
  let t7;
  let checksbox;
  let label2;
  let t9;
  let input2;
  let input2_value_value;
  let t10;
  let right;
  let rewardbox0;
  let label3;
  let t12;
  let label4;
  let raw0_value = game.i18n.localize("MOUSEGUARD.BeliefSub") + "";
  let t13;
  let textarea0;
  let textarea0_value_value;
  let t14;
  let rewardbox1;
  let label5;
  let t16;
  let label6;
  let raw1_value = game.i18n.localize("MOUSEGUARD.InstinctSub") + "";
  let t17;
  let textarea1;
  let textarea1_value_value;
  let t18;
  let rewardbox2;
  let label7;
  let t20;
  let label8;
  let raw2_value = game.i18n.localize("MOUSEGUARD.GoalSub") + "";
  let t21;
  let textarea2;
  let textarea2_value_value;
  return {
    c() {
      largecard = element("largecard");
      h1 = element("h1");
      h1.textContent = `${game.i18n.localize("MOUSEGUARD.Rewards")}`;
      t1 = space();
      left = element("left");
      fatebox = element("fatebox");
      label0 = element("label");
      label0.textContent = `${game.i18n.localize("MOUSEGUARD.Fate")}`;
      t3 = space();
      input0 = element("input");
      t4 = space();
      personabox = element("personabox");
      label1 = element("label");
      label1.textContent = `${game.i18n.localize("MOUSEGUARD.Persona")}`;
      t6 = space();
      input1 = element("input");
      t7 = space();
      checksbox = element("checksbox");
      label2 = element("label");
      label2.textContent = `${game.i18n.localize("MOUSEGUARD.Checks")}`;
      t9 = space();
      input2 = element("input");
      t10 = space();
      right = element("right");
      rewardbox0 = element("rewardbox");
      label3 = element("label");
      label3.textContent = `${game.i18n.localize("MOUSEGUARD.Belief")}`;
      t12 = space();
      label4 = element("label");
      t13 = space();
      textarea0 = element("textarea");
      t14 = space();
      rewardbox1 = element("rewardbox");
      label5 = element("label");
      label5.textContent = `${game.i18n.localize("MOUSEGUARD.Instinct")}`;
      t16 = space();
      label6 = element("label");
      t17 = space();
      textarea1 = element("textarea");
      t18 = space();
      rewardbox2 = element("rewardbox");
      label7 = element("label");
      label7.textContent = `${game.i18n.localize("MOUSEGUARD.Goal")}`;
      t20 = space();
      label8 = element("label");
      t21 = space();
      textarea2 = element("textarea");
      attr(h1, "class", "svelte-1maq3ft");
      attr(label0, "class", "header svelte-1maq3ft");
      attr(input0, "name", "system.rewards.fate");
      attr(input0, "type", "number");
      input0.value = input0_value_value = ctx[0].system.rewards.fate;
      attr(input0, "placeholder", "0");
      attr(input0, "class", "svelte-1maq3ft");
      attr(fatebox, "class", "svelte-1maq3ft");
      attr(label1, "class", "header svelte-1maq3ft");
      attr(input1, "name", "system.rewards.persona");
      attr(input1, "type", "number");
      input1.value = input1_value_value = ctx[0].system.rewards.persona;
      attr(input1, "placeholder", "0");
      attr(input1, "class", "svelte-1maq3ft");
      attr(personabox, "class", "svelte-1maq3ft");
      attr(label2, "class", "header svelte-1maq3ft");
      attr(input2, "name", "system.rewards.check");
      attr(input2, "type", "number");
      input2.value = input2_value_value = ctx[0].system.rewards.check;
      attr(input2, "placeholder", "0");
      attr(input2, "class", "svelte-1maq3ft");
      attr(checksbox, "class", "svelte-1maq3ft");
      attr(left, "class", "left svelte-1maq3ft");
      attr(label3, "class", "svelte-1maq3ft");
      attr(label4, "class", "sub svelte-1maq3ft");
      attr(textarea0, "name", "system.rewards.belief");
      textarea0.value = textarea0_value_value = ctx[0].system.rewards.belief;
      attr(textarea0, "class", "svelte-1maq3ft");
      attr(rewardbox0, "class", "svelte-1maq3ft");
      attr(label5, "class", "svelte-1maq3ft");
      attr(label6, "class", "sub svelte-1maq3ft");
      attr(textarea1, "name", "system.rewards.instinct");
      textarea1.value = textarea1_value_value = ctx[0].system.rewards.instinct;
      attr(textarea1, "class", "svelte-1maq3ft");
      attr(rewardbox1, "class", "svelte-1maq3ft");
      attr(label7, "class", "svelte-1maq3ft");
      attr(label8, "class", "sub svelte-1maq3ft");
      attr(textarea2, "name", "system.rewards.goal");
      textarea2.value = textarea2_value_value = ctx[0].system.rewards.goal;
      attr(textarea2, "class", "svelte-1maq3ft");
      attr(rewardbox2, "class", "svelte-1maq3ft");
      attr(right, "class", "right svelte-1maq3ft");
      attr(largecard, "class", "svelte-1maq3ft");
    },
    m(target, anchor) {
      insert(target, largecard, anchor);
      append(largecard, h1);
      append(largecard, t1);
      append(largecard, left);
      append(left, fatebox);
      append(fatebox, label0);
      append(fatebox, t3);
      append(fatebox, input0);
      append(left, t4);
      append(left, personabox);
      append(personabox, label1);
      append(personabox, t6);
      append(personabox, input1);
      append(left, t7);
      append(left, checksbox);
      append(checksbox, label2);
      append(checksbox, t9);
      append(checksbox, input2);
      append(largecard, t10);
      append(largecard, right);
      append(right, rewardbox0);
      append(rewardbox0, label3);
      append(rewardbox0, t12);
      append(rewardbox0, label4);
      label4.innerHTML = raw0_value;
      append(rewardbox0, t13);
      append(rewardbox0, textarea0);
      append(right, t14);
      append(right, rewardbox1);
      append(rewardbox1, label5);
      append(rewardbox1, t16);
      append(rewardbox1, label6);
      label6.innerHTML = raw1_value;
      append(rewardbox1, t17);
      append(rewardbox1, textarea1);
      append(right, t18);
      append(right, rewardbox2);
      append(rewardbox2, label7);
      append(rewardbox2, t20);
      append(rewardbox2, label8);
      label8.innerHTML = raw2_value;
      append(rewardbox2, t21);
      append(rewardbox2, textarea2);
    },
    p(ctx2, [dirty]) {
      if (dirty & 1 && input0_value_value !== (input0_value_value = ctx2[0].system.rewards.fate)) {
        input0.value = input0_value_value;
      }
      if (dirty & 1 && input1_value_value !== (input1_value_value = ctx2[0].system.rewards.persona)) {
        input1.value = input1_value_value;
      }
      if (dirty & 1 && input2_value_value !== (input2_value_value = ctx2[0].system.rewards.check)) {
        input2.value = input2_value_value;
      }
      if (dirty & 1 && textarea0_value_value !== (textarea0_value_value = ctx2[0].system.rewards.belief)) {
        textarea0.value = textarea0_value_value;
      }
      if (dirty & 1 && textarea1_value_value !== (textarea1_value_value = ctx2[0].system.rewards.instinct)) {
        textarea1.value = textarea1_value_value;
      }
      if (dirty & 1 && textarea2_value_value !== (textarea2_value_value = ctx2[0].system.rewards.goal)) {
        textarea2.value = textarea2_value_value;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(largecard);
    }
  };
}
function instance3($$self, $$props, $$invalidate) {
  let $sheetData;
  let sheetData = getContext("sheetStore");
  component_subscribe($$self, sheetData, (value) => $$invalidate(2, $sheetData = value));
  let data;
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 4) {
      $:
        $$invalidate(0, data = $sheetData.data);
    }
  };
  return [data, sheetData, $sheetData];
}
var MouseGuardActorSheetMouseRewards = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance3, create_fragment3, safe_not_equal, {});
  }
};
var MouseGuardActorSheetMouseRewards_default = MouseGuardActorSheetMouseRewards;
require_3();

// module/svelte/MouseGuardCommon.svelte
function updateRating(sheet, item2, type, value) {
  const ob = { [type]: value };
  if (type == "rank" || type == "rating" || type == "level") {
    if (value < 1)
      ob[type] = 1;
    ob.fail = 0;
    ob.pass = 0;
  }
  sheet?._updateEmbededItem(item2, ob);
}
function setMouseDice(sheet, count, message = "") {
  sheet?._setMouseDice(count, message);
}

// module/svelte/MouseGuardActorSheetMouseAbilities.svelte
function get_each_context(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[12] = list[i];
  return child_ctx;
}
function get_each_context_1(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[15] = list[i];
  child_ctx[17] = i;
  return child_ctx;
}
function get_each_context_2(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[15] = list[i];
  child_ctx[17] = i;
  return child_ctx;
}
function create_if_block_2(ctx) {
  let input;
  let input_name_value;
  let input_value_value;
  let mounted;
  let dispose;
  return {
    c() {
      input = element("input");
      attr(input, "name", input_name_value = ctx[12].id);
      attr(input, "type", "number");
      attr(input, "min", "0");
      input.value = input_value_value = ctx[12].system.tax;
      attr(input, "class", "svelte-3lzvcr");
    },
    m(target, anchor) {
      insert(target, input, anchor);
      if (!mounted) {
        dispose = listen(input, "change", ctx[6]);
        mounted = true;
      }
    },
    p(ctx2, dirty) {
      if (dirty & 1 && input_name_value !== (input_name_value = ctx2[12].id)) {
        attr(input, "name", input_name_value);
      }
      if (dirty & 1 && input_value_value !== (input_value_value = ctx2[12].system.tax)) {
        input.value = input_value_value;
      }
    },
    d(detaching) {
      if (detaching)
        detach(input);
      mounted = false;
      dispose();
    }
  };
}
function create_else_block_1(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_2(...args) {
    return ctx[8](ctx[12], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "no-checkmark svelte-3lzvcr");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_2);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_if_block_1(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_1(...args) {
    return ctx[7](ctx[12], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "checkmark svelte-3lzvcr");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_1);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_each_block_2(ctx) {
  let if_block_anchor;
  function select_block_type(ctx2, dirty) {
    if (ctx2[12].system.pass > ctx2[17])
      return create_if_block_1;
    return create_else_block_1;
  }
  let current_block_type = select_block_type(ctx, -1);
  let if_block = current_block_type(ctx);
  return {
    c() {
      if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if_block.m(target, anchor);
      insert(target, if_block_anchor, anchor);
    },
    p(ctx2, dirty) {
      if (current_block_type === (current_block_type = select_block_type(ctx2, dirty)) && if_block) {
        if_block.p(ctx2, dirty);
      } else {
        if_block.d(1);
        if_block = current_block_type(ctx2);
        if (if_block) {
          if_block.c();
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      }
    },
    d(detaching) {
      if_block.d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function create_else_block(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_4(...args) {
    return ctx[10](ctx[12], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "no-checkmark svelte-3lzvcr");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_4);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_if_block2(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_3(...args) {
    return ctx[9](ctx[12], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "checkmark svelte-3lzvcr");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_3);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_each_block_1(ctx) {
  let if_block_anchor;
  function select_block_type_1(ctx2, dirty) {
    if (ctx2[12].system.fail > ctx2[17])
      return create_if_block2;
    return create_else_block;
  }
  let current_block_type = select_block_type_1(ctx, -1);
  let if_block = current_block_type(ctx);
  return {
    c() {
      if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if_block.m(target, anchor);
      insert(target, if_block_anchor, anchor);
    },
    p(ctx2, dirty) {
      if (current_block_type === (current_block_type = select_block_type_1(ctx2, dirty)) && if_block) {
        if_block.p(ctx2, dirty);
      } else {
        if_block.d(1);
        if_block = current_block_type(ctx2);
        if (if_block) {
          if_block.c();
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      }
    },
    d(detaching) {
      if_block.d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function create_each_block(ctx) {
  let ability;
  let div;
  let label;
  let a;
  let t0_value = game.i18n.localize(ctx[12].name) + "";
  let t0;
  let t1;
  let t2;
  let input;
  let input_name_value;
  let input_value_value;
  let t3;
  let t4;
  let pass;
  let t5_value = game.i18n.localize("MOUSEGUARD.P") + "";
  let t5;
  let t6;
  let t7;
  let fail;
  let t8_value = game.i18n.localize("MOUSEGUARD.F") + "";
  let t8;
  let t9;
  let div_name_value;
  let t10;
  let mounted;
  let dispose;
  function click_handler(...args) {
    return ctx[4](ctx[12], ...args);
  }
  let if_block = ctx[12].name === "MOUSEGUARD.MNature" && create_if_block_2(ctx);
  let each_value_2 = {
    length: parseInt(ctx[12].system.rating) + 1
  };
  let each_blocks_1 = [];
  for (let i = 0; i < each_value_2.length; i += 1) {
    each_blocks_1[i] = create_each_block_2(get_each_context_2(ctx, each_value_2, i));
  }
  let each_value_1 = {
    length: parseInt(ctx[12].system.rating)
  };
  let each_blocks = [];
  for (let i = 0; i < each_value_1.length; i += 1) {
    each_blocks[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));
  }
  return {
    c() {
      ability = element("ability");
      div = element("div");
      label = element("label");
      a = element("a");
      t0 = text(t0_value);
      t1 = text(":");
      t2 = space();
      input = element("input");
      t3 = space();
      if (if_block)
        if_block.c();
      t4 = space();
      pass = element("pass");
      t5 = text(t5_value);
      t6 = text(":\r\n                    ");
      for (let i = 0; i < each_blocks_1.length; i += 1) {
        each_blocks_1[i].c();
      }
      t7 = space();
      fail = element("fail");
      t8 = text(t8_value);
      t9 = text(":\r\n                    ");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      t10 = space();
      attr(label, "class", "header svelte-3lzvcr");
      attr(input, "name", input_name_value = ctx[12].id);
      attr(input, "type", "number");
      attr(input, "min", "0");
      input.value = input_value_value = ctx[12].system.rating;
      attr(input, "class", "svelte-3lzvcr");
      attr(pass, "class", "svelte-3lzvcr");
      attr(fail, "class", "svelte-3lzvcr");
      attr(div, "name", div_name_value = ctx[12].id);
      attr(ability, "class", "svelte-3lzvcr");
    },
    m(target, anchor) {
      insert(target, ability, anchor);
      append(ability, div);
      append(div, label);
      append(label, a);
      append(a, t0);
      append(label, t1);
      append(div, t2);
      append(div, input);
      append(div, t3);
      if (if_block)
        if_block.m(div, null);
      append(div, t4);
      append(div, pass);
      append(pass, t5);
      append(pass, t6);
      for (let i = 0; i < each_blocks_1.length; i += 1) {
        each_blocks_1[i].m(pass, null);
      }
      append(div, t7);
      append(div, fail);
      append(fail, t8);
      append(fail, t9);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(fail, null);
      }
      append(ability, t10);
      if (!mounted) {
        dispose = [
          listen(label, "click", click_handler),
          listen(input, "change", ctx[5])
        ];
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & 1 && t0_value !== (t0_value = game.i18n.localize(ctx[12].name) + ""))
        set_data(t0, t0_value);
      if (dirty & 1 && input_name_value !== (input_name_value = ctx[12].id)) {
        attr(input, "name", input_name_value);
      }
      if (dirty & 1 && input_value_value !== (input_value_value = ctx[12].system.rating)) {
        input.value = input_value_value;
      }
      if (ctx[12].name === "MOUSEGUARD.MNature") {
        if (if_block) {
          if_block.p(ctx, dirty);
        } else {
          if_block = create_if_block_2(ctx);
          if_block.c();
          if_block.m(div, t4);
        }
      } else if (if_block) {
        if_block.d(1);
        if_block = null;
      }
      if (dirty & 5) {
        each_value_2 = {
          length: parseInt(ctx[12].system.rating) + 1
        };
        let i;
        for (i = 0; i < each_value_2.length; i += 1) {
          const child_ctx = get_each_context_2(ctx, each_value_2, i);
          if (each_blocks_1[i]) {
            each_blocks_1[i].p(child_ctx, dirty);
          } else {
            each_blocks_1[i] = create_each_block_2(child_ctx);
            each_blocks_1[i].c();
            each_blocks_1[i].m(pass, null);
          }
        }
        for (; i < each_blocks_1.length; i += 1) {
          each_blocks_1[i].d(1);
        }
        each_blocks_1.length = each_value_2.length;
      }
      if (dirty & 5) {
        each_value_1 = {
          length: parseInt(ctx[12].system.rating)
        };
        let i;
        for (i = 0; i < each_value_1.length; i += 1) {
          const child_ctx = get_each_context_1(ctx, each_value_1, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block_1(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(fail, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value_1.length;
      }
      if (dirty & 1 && div_name_value !== (div_name_value = ctx[12].id)) {
        attr(div, "name", div_name_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(ability);
      if (if_block)
        if_block.d();
      destroy_each(each_blocks_1, detaching);
      destroy_each(each_blocks, detaching);
      mounted = false;
      run_all(dispose);
    }
  };
}
function create_fragment4(ctx) {
  let largecard;
  let h1;
  let t1;
  let each_value = ctx[0];
  let each_blocks = [];
  for (let i = 0; i < each_value.length; i += 1) {
    each_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));
  }
  return {
    c() {
      largecard = element("largecard");
      h1 = element("h1");
      h1.textContent = `${game.i18n.localize("MOUSEGUARD.Abilities")}`;
      t1 = space();
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      attr(h1, "class", "svelte-3lzvcr");
      attr(largecard, "class", "svelte-3lzvcr");
    },
    m(target, anchor) {
      insert(target, largecard, anchor);
      append(largecard, h1);
      append(largecard, t1);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(largecard, null);
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & 5) {
        each_value = ctx2[0];
        let i;
        for (i = 0; i < each_value.length; i += 1) {
          const child_ctx = get_each_context(ctx2, each_value, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(largecard, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value.length;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(largecard);
      destroy_each(each_blocks, detaching);
    }
  };
}
function instance4($$self, $$props, $$invalidate) {
  let $sheetData;
  let sheetData = getContext("sheetStore");
  component_subscribe($$self, sheetData, (value) => $$invalidate(3, $sheetData = value));
  let { sheet } = $sheetData;
  let data;
  let abilities;
  const click_handler = (ability, e) => setMouseDice(sheet, ability.system.rating, game.i18n.localize(ability.name));
  const change_handler = (e) => updateRating(sheet, e.target.name, "rating", parseInt(e.target.value));
  const change_handler_1 = (e) => updateRating(sheet, e.target.name, "tax", parseInt(e.target.value));
  const click_handler_1 = (ability, e) => updateRating(sheet, ability.id, "pass", parseInt(ability.system.pass) - 1);
  const click_handler_2 = (ability, e) => updateRating(sheet, ability.id, "pass", parseInt(ability.system.pass) + 1);
  const click_handler_3 = (ability, e) => updateRating(sheet, ability.id, "fail", parseInt(ability.system.fail) - 1);
  const click_handler_4 = (ability, e) => updateRating(sheet, ability.id, "fail", parseInt(ability.system.fail) + 1);
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 8) {
      $:
        data = $sheetData.data;
    }
    if ($$self.$$.dirty & 8) {
      $:
        $$invalidate(0, abilities = $sheetData.data.system.itemTypes.ability);
    }
  };
  return [
    abilities,
    sheetData,
    sheet,
    $sheetData,
    click_handler,
    change_handler,
    change_handler_1,
    click_handler_1,
    click_handler_2,
    click_handler_3,
    click_handler_4
  ];
}
var MouseGuardActorSheetMouseAbilities = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance4, create_fragment4, safe_not_equal, {});
  }
};
var MouseGuardActorSheetMouseAbilities_default = MouseGuardActorSheetMouseAbilities;
require_4();

// module/svelte/MouseGuardActorSheetMouseSkills.svelte
function get_each_context2(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[12] = list[i];
  return child_ctx;
}
function get_each_context_12(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[15] = list[i];
  child_ctx[17] = i;
  return child_ctx;
}
function get_each_context_22(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[15] = list[i];
  child_ctx[17] = i;
  return child_ctx;
}
function create_else_block_12(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_2(...args) {
    return ctx[8](ctx[12], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "no-checkmark svelte-1v01e5x");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_2);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_if_block_12(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_1(...args) {
    return ctx[7](ctx[12], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "checkmark svelte-1v01e5x");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_1);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_each_block_22(ctx) {
  let if_block_anchor;
  function select_block_type(ctx2, dirty) {
    if (ctx2[12].system.pass > ctx2[17])
      return create_if_block_12;
    return create_else_block_12;
  }
  let current_block_type = select_block_type(ctx, -1);
  let if_block = current_block_type(ctx);
  return {
    c() {
      if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if_block.m(target, anchor);
      insert(target, if_block_anchor, anchor);
    },
    p(ctx2, dirty) {
      if (current_block_type === (current_block_type = select_block_type(ctx2, dirty)) && if_block) {
        if_block.p(ctx2, dirty);
      } else {
        if_block.d(1);
        if_block = current_block_type(ctx2);
        if (if_block) {
          if_block.c();
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      }
    },
    d(detaching) {
      if_block.d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function create_else_block2(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_4(...args) {
    return ctx[10](ctx[12], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "no-checkmark svelte-1v01e5x");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_4);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_if_block3(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_3(...args) {
    return ctx[9](ctx[12], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "checkmark svelte-1v01e5x");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_3);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_each_block_12(ctx) {
  let if_block_anchor;
  function select_block_type_1(ctx2, dirty) {
    if (ctx2[12].system.fail > ctx2[17])
      return create_if_block3;
    return create_else_block2;
  }
  let current_block_type = select_block_type_1(ctx, -1);
  let if_block = current_block_type(ctx);
  return {
    c() {
      if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if_block.m(target, anchor);
      insert(target, if_block_anchor, anchor);
    },
    p(ctx2, dirty) {
      if (current_block_type === (current_block_type = select_block_type_1(ctx2, dirty)) && if_block) {
        if_block.p(ctx2, dirty);
      } else {
        if_block.d(1);
        if_block = current_block_type(ctx2);
        if (if_block) {
          if_block.c();
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      }
    },
    d(detaching) {
      if_block.d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function create_each_block2(ctx) {
  let skill;
  let div0;
  let label;
  let a0;
  let t0_value = game.i18n.localize(ctx[12].name) + "";
  let t0;
  let t1;
  let t2;
  let input;
  let input_name_value;
  let input_value_value;
  let t3;
  let pass;
  let t4_value = game.i18n.localize("MOUSEGUARD.P") + "";
  let t4;
  let t5;
  let t6;
  let fail;
  let t7_value = game.i18n.localize("MOUSEGUARD.F") + "";
  let t7;
  let t8;
  let div0_name_value;
  let t9;
  let div1;
  let a1;
  let t10;
  let mounted;
  let dispose;
  function click_handler(...args) {
    return ctx[5](ctx[12], ...args);
  }
  let each_value_2 = {
    length: parseInt(ctx[12].system.rank) + 1
  };
  let each_blocks_1 = [];
  for (let i = 0; i < each_value_2.length; i += 1) {
    each_blocks_1[i] = create_each_block_22(get_each_context_22(ctx, each_value_2, i));
  }
  let each_value_1 = {
    length: parseInt(ctx[12].system.rank)
  };
  let each_blocks = [];
  for (let i = 0; i < each_value_1.length; i += 1) {
    each_blocks[i] = create_each_block_12(get_each_context_12(ctx, each_value_1, i));
  }
  return {
    c() {
      skill = element("skill");
      div0 = element("div");
      label = element("label");
      a0 = element("a");
      t0 = text(t0_value);
      t1 = text(":");
      t2 = space();
      input = element("input");
      t3 = space();
      pass = element("pass");
      t4 = text(t4_value);
      t5 = text(":\r\n                    ");
      for (let i = 0; i < each_blocks_1.length; i += 1) {
        each_blocks_1[i].c();
      }
      t6 = space();
      fail = element("fail");
      t7 = text(t7_value);
      t8 = text(":\r\n                    ");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      t9 = space();
      div1 = element("div");
      a1 = element("a");
      a1.innerHTML = `<i class="fas fa-trash"></i>`;
      t10 = space();
      attr(label, "class", "header svelte-1v01e5x");
      attr(input, "name", input_name_value = ctx[12].id);
      attr(input, "type", "number");
      attr(input, "min", "0");
      input.value = input_value_value = ctx[12].system.rank;
      attr(input, "class", "svelte-1v01e5x");
      attr(pass, "class", "svelte-1v01e5x");
      attr(fail, "class", "svelte-1v01e5x");
      attr(div0, "name", div0_name_value = ctx[12].id);
      attr(a1, "class", "item-control item-delete");
      attr(a1, "title", "Delete Item");
      attr(div1, "class", "item-controls svelte-1v01e5x");
      attr(skill, "class", "svelte-1v01e5x");
    },
    m(target, anchor) {
      insert(target, skill, anchor);
      append(skill, div0);
      append(div0, label);
      append(label, a0);
      append(a0, t0);
      append(label, t1);
      append(div0, t2);
      append(div0, input);
      append(div0, t3);
      append(div0, pass);
      append(pass, t4);
      append(pass, t5);
      for (let i = 0; i < each_blocks_1.length; i += 1) {
        each_blocks_1[i].m(pass, null);
      }
      append(div0, t6);
      append(div0, fail);
      append(fail, t7);
      append(fail, t8);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(fail, null);
      }
      append(skill, t9);
      append(skill, div1);
      append(div1, a1);
      append(skill, t10);
      if (!mounted) {
        dispose = [
          listen(label, "click", click_handler),
          listen(input, "change", ctx[6]),
          listen(a1, "click", function() {
            if (is_function(ctx[2]?._onItemDelete(ctx[12].id)))
              ctx[2]?._onItemDelete(ctx[12].id).apply(this, arguments);
          })
        ];
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & 1 && t0_value !== (t0_value = game.i18n.localize(ctx[12].name) + ""))
        set_data(t0, t0_value);
      if (dirty & 1 && input_name_value !== (input_name_value = ctx[12].id)) {
        attr(input, "name", input_name_value);
      }
      if (dirty & 1 && input_value_value !== (input_value_value = ctx[12].system.rank)) {
        input.value = input_value_value;
      }
      if (dirty & 5) {
        each_value_2 = {
          length: parseInt(ctx[12].system.rank) + 1
        };
        let i;
        for (i = 0; i < each_value_2.length; i += 1) {
          const child_ctx = get_each_context_22(ctx, each_value_2, i);
          if (each_blocks_1[i]) {
            each_blocks_1[i].p(child_ctx, dirty);
          } else {
            each_blocks_1[i] = create_each_block_22(child_ctx);
            each_blocks_1[i].c();
            each_blocks_1[i].m(pass, null);
          }
        }
        for (; i < each_blocks_1.length; i += 1) {
          each_blocks_1[i].d(1);
        }
        each_blocks_1.length = each_value_2.length;
      }
      if (dirty & 5) {
        each_value_1 = {
          length: parseInt(ctx[12].system.rank)
        };
        let i;
        for (i = 0; i < each_value_1.length; i += 1) {
          const child_ctx = get_each_context_12(ctx, each_value_1, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block_12(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(fail, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value_1.length;
      }
      if (dirty & 1 && div0_name_value !== (div0_name_value = ctx[12].id)) {
        attr(div0, "name", div0_name_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(skill);
      destroy_each(each_blocks_1, detaching);
      destroy_each(each_blocks, detaching);
      mounted = false;
      run_all(dispose);
    }
  };
}
function create_fragment5(ctx) {
  let largecard;
  let div;
  let a;
  let i;
  let t0;
  let t1_value = game.i18n.localize("MOUSEGUARD.AddSkill") + "";
  let t1;
  let a_title_value;
  let t2;
  let h1;
  let t4;
  let mounted;
  let dispose;
  let each_value = ctx[0];
  let each_blocks = [];
  for (let i2 = 0; i2 < each_value.length; i2 += 1) {
    each_blocks[i2] = create_each_block2(get_each_context2(ctx, each_value, i2));
  }
  return {
    c() {
      largecard = element("largecard");
      div = element("div");
      a = element("a");
      i = element("i");
      t0 = space();
      t1 = text(t1_value);
      t2 = space();
      h1 = element("h1");
      h1.textContent = `${game.i18n.localize("MOUSEGUARD.Skills")}`;
      t4 = space();
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        each_blocks[i2].c();
      }
      attr(i, "class", "fas fa-plus");
      attr(a, "class", "item-control");
      attr(a, "title", a_title_value = game.i18n.localize("MOUSEGUARD.AddSkill"));
      attr(a, "data-type", "wise");
      attr(div, "class", "item-controls item-create svelte-1v01e5x");
      attr(h1, "class", "svelte-1v01e5x");
      attr(largecard, "class", "svelte-1v01e5x");
    },
    m(target, anchor) {
      insert(target, largecard, anchor);
      append(largecard, div);
      append(div, a);
      append(a, i);
      append(a, t0);
      append(a, t1);
      append(largecard, t2);
      append(largecard, h1);
      append(largecard, t4);
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        each_blocks[i2].m(largecard, null);
      }
      if (!mounted) {
        dispose = listen(a, "click", ctx[3]());
        mounted = true;
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & 5) {
        each_value = ctx2[0];
        let i2;
        for (i2 = 0; i2 < each_value.length; i2 += 1) {
          const child_ctx = get_each_context2(ctx2, each_value, i2);
          if (each_blocks[i2]) {
            each_blocks[i2].p(child_ctx, dirty);
          } else {
            each_blocks[i2] = create_each_block2(child_ctx);
            each_blocks[i2].c();
            each_blocks[i2].m(largecard, null);
          }
        }
        for (; i2 < each_blocks.length; i2 += 1) {
          each_blocks[i2].d(1);
        }
        each_blocks.length = each_value.length;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(largecard);
      destroy_each(each_blocks, detaching);
      mounted = false;
      dispose();
    }
  };
}
function instance5($$self, $$props, $$invalidate) {
  let skills;
  let $sheetData;
  let sheetData = getContext("sheetStore");
  component_subscribe($$self, sheetData, (value) => $$invalidate(4, $sheetData = value));
  let { sheet } = $sheetData;
  let data;
  const openSkillsCompendium = () => () => game.packs.get("mouseguard.skills").render(true);
  const click_handler = (skill, e) => setMouseDice(sheet, skill.system.rank, game.i18n.localize(skill.name));
  const change_handler = (e) => updateRating(sheet, e.target.name, "rank", parseInt(e.target.value));
  const click_handler_1 = (skill, e) => updateRating(sheet, skill.id, "pass", parseInt(skill.system.pass) - 1);
  const click_handler_2 = (skill, e) => updateRating(sheet, skill.id, "pass", parseInt(skill.system.pass) + 1);
  const click_handler_3 = (skill, e) => updateRating(sheet, skill.id, "fail", parseInt(skill.system.fail) - 1);
  const click_handler_4 = (skill, e) => updateRating(sheet, skill.id, "fail", parseInt(skill.system.fail) + 1);
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 16) {
      $:
        data = $sheetData.data;
    }
    if ($$self.$$.dirty & 16) {
      $:
        $$invalidate(0, skills = $sheetData.data.system.itemTypes.skill);
    }
  };
  return [
    skills,
    sheetData,
    sheet,
    openSkillsCompendium,
    $sheetData,
    click_handler,
    change_handler,
    click_handler_1,
    click_handler_2,
    click_handler_3,
    click_handler_4
  ];
}
var MouseGuardActorSheetMouseSkills = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance5, create_fragment5, safe_not_equal, {});
  }
};
var MouseGuardActorSheetMouseSkills_default = MouseGuardActorSheetMouseSkills;
require_5();

// module/svelte/MouseGuardActorSheetMouseWises.svelte
function get_each_context3(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[11] = list[i];
  return child_ctx;
}
function get_each_context_13(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[14] = list[i];
  child_ctx[16] = i;
  return child_ctx;
}
function get_each_context_23(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[14] = list[i];
  child_ctx[16] = i;
  return child_ctx;
}
function create_else_block_13(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_2(...args) {
    return ctx[7](ctx[11], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "no-checkmark svelte-ebjd4e");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_2);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_if_block_13(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_1(...args) {
    return ctx[6](ctx[11], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "checkmark svelte-ebjd4e");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_1);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_each_block_23(ctx) {
  let if_block_anchor;
  function select_block_type(ctx2, dirty) {
    if (ctx2[11].system.pass > ctx2[16])
      return create_if_block_13;
    return create_else_block_13;
  }
  let current_block_type = select_block_type(ctx, -1);
  let if_block = current_block_type(ctx);
  return {
    c() {
      if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if_block.m(target, anchor);
      insert(target, if_block_anchor, anchor);
    },
    p(ctx2, dirty) {
      if (current_block_type === (current_block_type = select_block_type(ctx2, dirty)) && if_block) {
        if_block.p(ctx2, dirty);
      } else {
        if_block.d(1);
        if_block = current_block_type(ctx2);
        if (if_block) {
          if_block.c();
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      }
    },
    d(detaching) {
      if_block.d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function create_else_block3(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_4(...args) {
    return ctx[9](ctx[11], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "no-checkmark svelte-ebjd4e");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_4);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_if_block4(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_3(...args) {
    return ctx[8](ctx[11], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "checkmark svelte-ebjd4e");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_3);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_each_block_13(ctx) {
  let if_block_anchor;
  function select_block_type_1(ctx2, dirty) {
    if (ctx2[11].system.fail > ctx2[16])
      return create_if_block4;
    return create_else_block3;
  }
  let current_block_type = select_block_type_1(ctx, -1);
  let if_block = current_block_type(ctx);
  return {
    c() {
      if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if_block.m(target, anchor);
      insert(target, if_block_anchor, anchor);
    },
    p(ctx2, dirty) {
      if (current_block_type === (current_block_type = select_block_type_1(ctx2, dirty)) && if_block) {
        if_block.p(ctx2, dirty);
      } else {
        if_block.d(1);
        if_block = current_block_type(ctx2);
        if (if_block) {
          if_block.c();
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      }
    },
    d(detaching) {
      if_block.d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function create_each_block3(ctx) {
  let wise;
  let div0;
  let label;
  let a0;
  let t0_value = game.i18n.localize(ctx[11].name) + "";
  let t0;
  let t1;
  let t2;
  let input;
  let input_name_value;
  let input_value_value;
  let t3;
  let pass;
  let t4_value = game.i18n.localize("MOUSEGUARD.P") + "";
  let t4;
  let t5;
  let t6;
  let fail;
  let t7_value = game.i18n.localize("MOUSEGUARD.F") + "";
  let t7;
  let t8;
  let div0_name_value;
  let t9;
  let div1;
  let a1;
  let t10;
  let mounted;
  let dispose;
  function click_handler(...args) {
    return ctx[4](ctx[11], ...args);
  }
  let each_value_2 = {
    length: parseInt(ctx[11].system.rank) + 1
  };
  let each_blocks_1 = [];
  for (let i = 0; i < each_value_2.length; i += 1) {
    each_blocks_1[i] = create_each_block_23(get_each_context_23(ctx, each_value_2, i));
  }
  let each_value_1 = {
    length: parseInt(ctx[11].system.rank)
  };
  let each_blocks = [];
  for (let i = 0; i < each_value_1.length; i += 1) {
    each_blocks[i] = create_each_block_13(get_each_context_13(ctx, each_value_1, i));
  }
  return {
    c() {
      wise = element("wise");
      div0 = element("div");
      label = element("label");
      a0 = element("a");
      t0 = text(t0_value);
      t1 = text(":");
      t2 = space();
      input = element("input");
      t3 = space();
      pass = element("pass");
      t4 = text(t4_value);
      t5 = text(":\r\n                    ");
      for (let i = 0; i < each_blocks_1.length; i += 1) {
        each_blocks_1[i].c();
      }
      t6 = space();
      fail = element("fail");
      t7 = text(t7_value);
      t8 = text(":\r\n                    ");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      t9 = space();
      div1 = element("div");
      a1 = element("a");
      a1.innerHTML = `<i class="fas fa-trash"></i>`;
      t10 = space();
      attr(label, "class", "header svelte-ebjd4e");
      attr(input, "name", input_name_value = ctx[11].id);
      attr(input, "type", "number");
      attr(input, "min", "0");
      input.value = input_value_value = ctx[11].system.rank;
      attr(input, "class", "svelte-ebjd4e");
      attr(pass, "class", "svelte-ebjd4e");
      attr(fail, "class", "svelte-ebjd4e");
      attr(div0, "name", div0_name_value = ctx[11].id);
      attr(a1, "class", "item-control item-delete");
      attr(a1, "title", "Delete Item");
      attr(div1, "class", "item-controls svelte-ebjd4e");
      attr(wise, "class", "svelte-ebjd4e");
    },
    m(target, anchor) {
      insert(target, wise, anchor);
      append(wise, div0);
      append(div0, label);
      append(label, a0);
      append(a0, t0);
      append(label, t1);
      append(div0, t2);
      append(div0, input);
      append(div0, t3);
      append(div0, pass);
      append(pass, t4);
      append(pass, t5);
      for (let i = 0; i < each_blocks_1.length; i += 1) {
        each_blocks_1[i].m(pass, null);
      }
      append(div0, t6);
      append(div0, fail);
      append(fail, t7);
      append(fail, t8);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(fail, null);
      }
      append(wise, t9);
      append(wise, div1);
      append(div1, a1);
      append(wise, t10);
      if (!mounted) {
        dispose = [
          listen(label, "click", click_handler),
          listen(input, "change", ctx[5]),
          listen(a1, "click", function() {
            if (is_function(ctx[2]?._onItemDelete(ctx[11].id)))
              ctx[2]?._onItemDelete(ctx[11].id).apply(this, arguments);
          })
        ];
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & 1 && t0_value !== (t0_value = game.i18n.localize(ctx[11].name) + ""))
        set_data(t0, t0_value);
      if (dirty & 1 && input_name_value !== (input_name_value = ctx[11].id)) {
        attr(input, "name", input_name_value);
      }
      if (dirty & 1 && input_value_value !== (input_value_value = ctx[11].system.rank)) {
        input.value = input_value_value;
      }
      if (dirty & 5) {
        each_value_2 = {
          length: parseInt(ctx[11].system.rank) + 1
        };
        let i;
        for (i = 0; i < each_value_2.length; i += 1) {
          const child_ctx = get_each_context_23(ctx, each_value_2, i);
          if (each_blocks_1[i]) {
            each_blocks_1[i].p(child_ctx, dirty);
          } else {
            each_blocks_1[i] = create_each_block_23(child_ctx);
            each_blocks_1[i].c();
            each_blocks_1[i].m(pass, null);
          }
        }
        for (; i < each_blocks_1.length; i += 1) {
          each_blocks_1[i].d(1);
        }
        each_blocks_1.length = each_value_2.length;
      }
      if (dirty & 5) {
        each_value_1 = {
          length: parseInt(ctx[11].system.rank)
        };
        let i;
        for (i = 0; i < each_value_1.length; i += 1) {
          const child_ctx = get_each_context_13(ctx, each_value_1, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block_13(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(fail, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value_1.length;
      }
      if (dirty & 1 && div0_name_value !== (div0_name_value = ctx[11].id)) {
        attr(div0, "name", div0_name_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(wise);
      destroy_each(each_blocks_1, detaching);
      destroy_each(each_blocks, detaching);
      mounted = false;
      run_all(dispose);
    }
  };
}
function create_fragment6(ctx) {
  let largecard;
  let div;
  let a;
  let i;
  let t0;
  let t1_value = game.i18n.localize("MOUSEGUARD.AddWise") + "";
  let t1;
  let a_title_value;
  let t2;
  let h1;
  let t4;
  let mounted;
  let dispose;
  let each_value = ctx[0];
  let each_blocks = [];
  for (let i2 = 0; i2 < each_value.length; i2 += 1) {
    each_blocks[i2] = create_each_block3(get_each_context3(ctx, each_value, i2));
  }
  return {
    c() {
      largecard = element("largecard");
      div = element("div");
      a = element("a");
      i = element("i");
      t0 = space();
      t1 = text(t1_value);
      t2 = space();
      h1 = element("h1");
      h1.textContent = `${game.i18n.localize("MOUSEGUARD.Wises")}`;
      t4 = space();
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        each_blocks[i2].c();
      }
      attr(i, "class", "fas fa-plus");
      attr(a, "class", "item-control");
      attr(a, "title", a_title_value = game.i18n.localize("MOUSEGUARD.AddWise"));
      attr(a, "data-type", "wise");
      attr(div, "class", "item-controls item-create svelte-ebjd4e");
      attr(h1, "class", "svelte-ebjd4e");
      attr(largecard, "class", "svelte-ebjd4e");
    },
    m(target, anchor) {
      insert(target, largecard, anchor);
      append(largecard, div);
      append(div, a);
      append(a, i);
      append(a, t0);
      append(a, t1);
      append(largecard, t2);
      append(largecard, h1);
      append(largecard, t4);
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        each_blocks[i2].m(largecard, null);
      }
      if (!mounted) {
        dispose = listen(a, "click", ctx[2]?._onItemCreate.bind(ctx[2]));
        mounted = true;
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & 5) {
        each_value = ctx2[0];
        let i2;
        for (i2 = 0; i2 < each_value.length; i2 += 1) {
          const child_ctx = get_each_context3(ctx2, each_value, i2);
          if (each_blocks[i2]) {
            each_blocks[i2].p(child_ctx, dirty);
          } else {
            each_blocks[i2] = create_each_block3(child_ctx);
            each_blocks[i2].c();
            each_blocks[i2].m(largecard, null);
          }
        }
        for (; i2 < each_blocks.length; i2 += 1) {
          each_blocks[i2].d(1);
        }
        each_blocks.length = each_value.length;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(largecard);
      destroy_each(each_blocks, detaching);
      mounted = false;
      dispose();
    }
  };
}
function instance6($$self, $$props, $$invalidate) {
  let wises;
  let $sheetData;
  let sheetData = getContext("sheetStore");
  component_subscribe($$self, sheetData, (value) => $$invalidate(3, $sheetData = value));
  let { sheet } = $sheetData;
  let data;
  const click_handler = (wise, e) => setMouseDice(sheet, wise.system.rank, game.i18n.localize(wise.name));
  const change_handler = (e) => updateRating(sheet, e.target.name, "rank", parseInt(e.target.value));
  const click_handler_1 = (wise, e) => updateRating(sheet, wise.id, "pass", parseInt(wise.system.pass) - 1);
  const click_handler_2 = (wise, e) => updateRating(sheet, wise.id, "pass", parseInt(wise.system.pass) + 1);
  const click_handler_3 = (wise, e) => updateRating(sheet, wise.id, "fail", parseInt(wise.system.fail) - 1);
  const click_handler_4 = (wise, e) => updateRating(sheet, wise.id, "fail", parseInt(wise.system.fail) + 1);
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 8) {
      $:
        data = $sheetData.data;
    }
    if ($$self.$$.dirty & 8) {
      $:
        $$invalidate(0, wises = $sheetData.data.system.itemTypes.wise);
    }
  };
  return [
    wises,
    sheetData,
    sheet,
    $sheetData,
    click_handler,
    change_handler,
    click_handler_1,
    click_handler_2,
    click_handler_3,
    click_handler_4
  ];
}
var MouseGuardActorSheetMouseWises = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance6, create_fragment6, safe_not_equal, {});
  }
};
var MouseGuardActorSheetMouseWises_default = MouseGuardActorSheetMouseWises;
require_6();

// module/svelte/MouseGuardActorSheetMouseTraits.svelte
function get_each_context4(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[12] = list[i];
  return child_ctx;
}
function get_each_context_14(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[15] = list[i];
  child_ctx[17] = i;
  return child_ctx;
}
function get_each_context_24(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[15] = list[i];
  child_ctx[17] = i;
  return child_ctx;
}
function create_else_block_14(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_2(...args) {
    return ctx[8](ctx[12], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "no-checkmark svelte-11zbf01");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_2);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_if_block_14(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_1(...args) {
    return ctx[7](ctx[12], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "checkmark svelte-11zbf01");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_1);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_each_block_24(ctx) {
  let if_block_anchor;
  function select_block_type(ctx2, dirty) {
    if (ctx2[12].system.usedfor > ctx2[17])
      return create_if_block_14;
    return create_else_block_14;
  }
  let current_block_type = select_block_type(ctx, -1);
  let if_block = current_block_type(ctx);
  return {
    c() {
      if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if_block.m(target, anchor);
      insert(target, if_block_anchor, anchor);
    },
    p(ctx2, dirty) {
      if (current_block_type === (current_block_type = select_block_type(ctx2, dirty)) && if_block) {
        if_block.p(ctx2, dirty);
      } else {
        if_block.d(1);
        if_block = current_block_type(ctx2);
        if (if_block) {
          if_block.c();
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      }
    },
    d(detaching) {
      if_block.d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function create_else_block4(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_4(...args) {
    return ctx[10](ctx[12], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "no-checkmark svelte-11zbf01");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_4);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_if_block5(ctx) {
  let div;
  let mounted;
  let dispose;
  function click_handler_3(...args) {
    return ctx[9](ctx[12], ...args);
  }
  return {
    c() {
      div = element("div");
      attr(div, "class", "checkmark svelte-11zbf01");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if (!mounted) {
        dispose = listen(div, "click", click_handler_3);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      dispose();
    }
  };
}
function create_each_block_14(ctx) {
  let if_block_anchor;
  function select_block_type_1(ctx2, dirty) {
    if (ctx2[12].system.usedagainst > ctx2[17])
      return create_if_block5;
    return create_else_block4;
  }
  let current_block_type = select_block_type_1(ctx, -1);
  let if_block = current_block_type(ctx);
  return {
    c() {
      if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if_block.m(target, anchor);
      insert(target, if_block_anchor, anchor);
    },
    p(ctx2, dirty) {
      if (current_block_type === (current_block_type = select_block_type_1(ctx2, dirty)) && if_block) {
        if_block.p(ctx2, dirty);
      } else {
        if_block.d(1);
        if_block = current_block_type(ctx2);
        if (if_block) {
          if_block.c();
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      }
    },
    d(detaching) {
      if_block.d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function create_each_block4(ctx) {
  let trait;
  let div0;
  let label;
  let a0;
  let t0_value = game.i18n.localize(ctx[12].name) + "";
  let t0;
  let t1;
  let t2;
  let input;
  let input_name_value;
  let input_value_value;
  let t3;
  let for_1;
  let t4_value = game.i18n.localize("MOUSEGUARD.F") + "";
  let t4;
  let t5;
  let t6;
  let pass;
  let t7_value = game.i18n.localize("MOUSEGUARD.A") + "";
  let t7;
  let t8;
  let div0_name_value;
  let t9;
  let div1;
  let a1;
  let t10;
  let mounted;
  let dispose;
  function click_handler(...args) {
    return ctx[5](ctx[12], ...args);
  }
  let each_value_2 = { length: 1 };
  let each_blocks_1 = [];
  for (let i = 0; i < each_value_2.length; i += 1) {
    each_blocks_1[i] = create_each_block_24(get_each_context_24(ctx, each_value_2, i));
  }
  let each_value_1 = { length: 6 };
  let each_blocks = [];
  for (let i = 0; i < each_value_1.length; i += 1) {
    each_blocks[i] = create_each_block_14(get_each_context_14(ctx, each_value_1, i));
  }
  return {
    c() {
      trait = element("trait");
      div0 = element("div");
      label = element("label");
      a0 = element("a");
      t0 = text(t0_value);
      t1 = text(":");
      t2 = space();
      input = element("input");
      t3 = space();
      for_1 = element("for");
      t4 = text(t4_value);
      t5 = text(":\r\n                    ");
      for (let i = 0; i < each_blocks_1.length; i += 1) {
        each_blocks_1[i].c();
      }
      t6 = space();
      pass = element("pass");
      t7 = text(t7_value);
      t8 = text(":\r\n                    ");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      t9 = space();
      div1 = element("div");
      a1 = element("a");
      a1.innerHTML = `<i class="fas fa-trash"></i>`;
      t10 = space();
      attr(label, "class", "header svelte-11zbf01");
      attr(input, "name", input_name_value = ctx[12].id);
      attr(input, "type", "number");
      attr(input, "min", "1");
      attr(input, "max", "3");
      input.value = input_value_value = ctx[12].system.level;
      attr(input, "class", "svelte-11zbf01");
      attr(for_1, "class", "svelte-11zbf01");
      attr(pass, "class", "svelte-11zbf01");
      attr(div0, "name", div0_name_value = ctx[12].id);
      attr(a1, "class", "item-control item-delete");
      attr(a1, "title", "Delete Item");
      attr(div1, "class", "item-controls svelte-11zbf01");
      attr(trait, "class", "svelte-11zbf01");
    },
    m(target, anchor) {
      insert(target, trait, anchor);
      append(trait, div0);
      append(div0, label);
      append(label, a0);
      append(a0, t0);
      append(label, t1);
      append(div0, t2);
      append(div0, input);
      append(div0, t3);
      append(div0, for_1);
      append(for_1, t4);
      append(for_1, t5);
      for (let i = 0; i < each_blocks_1.length; i += 1) {
        each_blocks_1[i].m(for_1, null);
      }
      append(div0, t6);
      append(div0, pass);
      append(pass, t7);
      append(pass, t8);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(pass, null);
      }
      append(trait, t9);
      append(trait, div1);
      append(div1, a1);
      append(trait, t10);
      if (!mounted) {
        dispose = [
          listen(label, "click", click_handler),
          listen(input, "change", ctx[6]),
          listen(a1, "click", function() {
            if (is_function(ctx[2]?._onItemDelete(ctx[12].id)))
              ctx[2]?._onItemDelete(ctx[12].id).apply(this, arguments);
          })
        ];
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & 1 && t0_value !== (t0_value = game.i18n.localize(ctx[12].name) + ""))
        set_data(t0, t0_value);
      if (dirty & 1 && input_name_value !== (input_name_value = ctx[12].id)) {
        attr(input, "name", input_name_value);
      }
      if (dirty & 1 && input_value_value !== (input_value_value = ctx[12].system.level)) {
        input.value = input_value_value;
      }
      if (dirty & 5) {
        each_value_2 = { length: 1 };
        let i;
        for (i = 0; i < each_value_2.length; i += 1) {
          const child_ctx = get_each_context_24(ctx, each_value_2, i);
          if (each_blocks_1[i]) {
            each_blocks_1[i].p(child_ctx, dirty);
          } else {
            each_blocks_1[i] = create_each_block_24(child_ctx);
            each_blocks_1[i].c();
            each_blocks_1[i].m(for_1, null);
          }
        }
        for (; i < each_blocks_1.length; i += 1) {
          each_blocks_1[i].d(1);
        }
        each_blocks_1.length = each_value_2.length;
      }
      if (dirty & 5) {
        each_value_1 = { length: 6 };
        let i;
        for (i = 0; i < each_value_1.length; i += 1) {
          const child_ctx = get_each_context_14(ctx, each_value_1, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block_14(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(pass, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value_1.length;
      }
      if (dirty & 1 && div0_name_value !== (div0_name_value = ctx[12].id)) {
        attr(div0, "name", div0_name_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(trait);
      destroy_each(each_blocks_1, detaching);
      destroy_each(each_blocks, detaching);
      mounted = false;
      run_all(dispose);
    }
  };
}
function create_fragment7(ctx) {
  let largecard;
  let div;
  let a;
  let i;
  let t0;
  let t1_value = game.i18n.localize("MOUSEGUARD.AddTrait") + "";
  let t1;
  let a_title_value;
  let t2;
  let h1;
  let t4;
  let mounted;
  let dispose;
  let each_value = ctx[0];
  let each_blocks = [];
  for (let i2 = 0; i2 < each_value.length; i2 += 1) {
    each_blocks[i2] = create_each_block4(get_each_context4(ctx, each_value, i2));
  }
  return {
    c() {
      largecard = element("largecard");
      div = element("div");
      a = element("a");
      i = element("i");
      t0 = space();
      t1 = text(t1_value);
      t2 = space();
      h1 = element("h1");
      h1.textContent = `${game.i18n.localize("MOUSEGUARD.Traits")}`;
      t4 = space();
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        each_blocks[i2].c();
      }
      attr(i, "class", "fas fa-plus");
      attr(a, "class", "item-control");
      attr(a, "title", a_title_value = game.i18n.localize("MOUSEGUARD.AddTrait"));
      attr(a, "data-type", "wise");
      attr(div, "class", "item-controls item-create svelte-11zbf01");
      attr(h1, "class", "svelte-11zbf01");
      attr(largecard, "class", "svelte-11zbf01");
    },
    m(target, anchor) {
      insert(target, largecard, anchor);
      append(largecard, div);
      append(div, a);
      append(a, i);
      append(a, t0);
      append(a, t1);
      append(largecard, t2);
      append(largecard, h1);
      append(largecard, t4);
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        each_blocks[i2].m(largecard, null);
      }
      if (!mounted) {
        dispose = listen(a, "click", ctx[3]());
        mounted = true;
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & 5) {
        each_value = ctx2[0];
        let i2;
        for (i2 = 0; i2 < each_value.length; i2 += 1) {
          const child_ctx = get_each_context4(ctx2, each_value, i2);
          if (each_blocks[i2]) {
            each_blocks[i2].p(child_ctx, dirty);
          } else {
            each_blocks[i2] = create_each_block4(child_ctx);
            each_blocks[i2].c();
            each_blocks[i2].m(largecard, null);
          }
        }
        for (; i2 < each_blocks.length; i2 += 1) {
          each_blocks[i2].d(1);
        }
        each_blocks.length = each_value.length;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(largecard);
      destroy_each(each_blocks, detaching);
      mounted = false;
      dispose();
    }
  };
}
function instance7($$self, $$props, $$invalidate) {
  let traits;
  let $sheetData;
  let sheetData = getContext("sheetStore");
  component_subscribe($$self, sheetData, (value) => $$invalidate(4, $sheetData = value));
  let { sheet } = $sheetData;
  let data;
  const openCompendium = () => () => game.packs.get("mouseguard.traits").render(true);
  const click_handler = (trait, e) => setMouseDice(sheet, trait.system.level, game.i18n.localize(trait.name));
  const change_handler = (e) => updateRating(sheet, e.target.name, "level", parseInt(e.target.value));
  const click_handler_1 = (trait, e) => updateRating(sheet, trait.id, "usedfor", parseInt(trait.system.usedfor) - 1);
  const click_handler_2 = (trait, e) => updateRating(sheet, trait.id, "usedfor", parseInt(trait.system.usedfor) + 1);
  const click_handler_3 = (trait, e) => updateRating(sheet, trait.id, "usedagainst", parseInt(trait.system.usedagainst) - 1);
  const click_handler_4 = (trait, e) => updateRating(sheet, trait.id, "usedagainst", parseInt(trait.system.usedagainst) + 1);
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 16) {
      $:
        data = $sheetData.data;
    }
    if ($$self.$$.dirty & 16) {
      $:
        $$invalidate(0, traits = $sheetData.data.system.itemTypes.trait);
    }
  };
  return [
    traits,
    sheetData,
    sheet,
    openCompendium,
    $sheetData,
    click_handler,
    change_handler,
    click_handler_1,
    click_handler_2,
    click_handler_3,
    click_handler_4
  ];
}
var MouseGuardActorSheetMouseTraits = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance7, create_fragment7, safe_not_equal, {});
  }
};
var MouseGuardActorSheetMouseTraits_default = MouseGuardActorSheetMouseTraits;
require_7();

// module/svelte/MouseGuardActorSheetMouseSkillAbilityTab.svelte
function create_fragment8(ctx) {
  let abilities;
  let mouseguardactorsheetmouseabilities;
  let t0;
  let wise;
  let mouseguardactorsheetmousewises;
  let t1;
  let skill;
  let mouseguardactorsheetmouseskills;
  let t2;
  let trait;
  let mouseguardactorsheetmousetraits;
  let current;
  mouseguardactorsheetmouseabilities = new MouseGuardActorSheetMouseAbilities_default({});
  mouseguardactorsheetmousewises = new MouseGuardActorSheetMouseWises_default({});
  mouseguardactorsheetmouseskills = new MouseGuardActorSheetMouseSkills_default({});
  mouseguardactorsheetmousetraits = new MouseGuardActorSheetMouseTraits_default({});
  return {
    c() {
      abilities = element("abilities");
      create_component(mouseguardactorsheetmouseabilities.$$.fragment);
      t0 = space();
      wise = element("wise");
      create_component(mouseguardactorsheetmousewises.$$.fragment);
      t1 = space();
      skill = element("skill");
      create_component(mouseguardactorsheetmouseskills.$$.fragment);
      t2 = space();
      trait = element("trait");
      create_component(mouseguardactorsheetmousetraits.$$.fragment);
      attr(abilities, "class", "svelte-4dvw4");
      attr(wise, "class", "svelte-4dvw4");
      attr(skill, "class", "svelte-4dvw4");
      attr(trait, "class", "svelte-4dvw4");
    },
    m(target, anchor) {
      insert(target, abilities, anchor);
      mount_component(mouseguardactorsheetmouseabilities, abilities, null);
      insert(target, t0, anchor);
      insert(target, wise, anchor);
      mount_component(mouseguardactorsheetmousewises, wise, null);
      insert(target, t1, anchor);
      insert(target, skill, anchor);
      mount_component(mouseguardactorsheetmouseskills, skill, null);
      insert(target, t2, anchor);
      insert(target, trait, anchor);
      mount_component(mouseguardactorsheetmousetraits, trait, null);
      current = true;
    },
    p: noop,
    i(local) {
      if (current)
        return;
      transition_in(mouseguardactorsheetmouseabilities.$$.fragment, local);
      transition_in(mouseguardactorsheetmousewises.$$.fragment, local);
      transition_in(mouseguardactorsheetmouseskills.$$.fragment, local);
      transition_in(mouseguardactorsheetmousetraits.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(mouseguardactorsheetmouseabilities.$$.fragment, local);
      transition_out(mouseguardactorsheetmousewises.$$.fragment, local);
      transition_out(mouseguardactorsheetmouseskills.$$.fragment, local);
      transition_out(mouseguardactorsheetmousetraits.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(abilities);
      destroy_component(mouseguardactorsheetmouseabilities);
      if (detaching)
        detach(t0);
      if (detaching)
        detach(wise);
      destroy_component(mouseguardactorsheetmousewises);
      if (detaching)
        detach(t1);
      if (detaching)
        detach(skill);
      destroy_component(mouseguardactorsheetmouseskills);
      if (detaching)
        detach(t2);
      if (detaching)
        detach(trait);
      destroy_component(mouseguardactorsheetmousetraits);
    }
  };
}
var MouseGuardActorSheetMouseSkillAbilityTab = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, null, create_fragment8, safe_not_equal, {});
  }
};
var MouseGuardActorSheetMouseSkillAbilityTab_default = MouseGuardActorSheetMouseSkillAbilityTab;
require_8();

// module/svelte/MouseGuardActorSheetMouseDispo.svelte
function create_fragment9(ctx) {
  let largecard;
  let h1;
  let t1;
  let dispoBox;
  let startingBox;
  let label0;
  let t5;
  let input0;
  let input0_value_value;
  let t6;
  let currentBox;
  let label1;
  let t10;
  let input1;
  let input1_value_value;
  return {
    c() {
      largecard = element("largecard");
      h1 = element("h1");
      h1.textContent = `${game.i18n.localize("MOUSEGUARD.Disposition")}`;
      t1 = space();
      dispoBox = element("dispoBox");
      startingBox = element("startingBox");
      label0 = element("label");
      label0.textContent = `${game.i18n.localize("MOUSEGUARD.Starting")} 
                ${game.i18n.localize("MOUSEGUARD.Disposition")}`;
      t5 = space();
      input0 = element("input");
      t6 = space();
      currentBox = element("currentBox");
      label1 = element("label");
      label1.textContent = `${game.i18n.localize("MOUSEGUARD.Current")} 
                ${game.i18n.localize("MOUSEGUARD.Disposition")}`;
      t10 = space();
      input1 = element("input");
      attr(h1, "class", "svelte-ujgmh3");
      attr(label0, "class", "header svelte-ujgmh3");
      attr(input0, "class", "disposition-value svelte-ujgmh3");
      attr(input0, "name", "system.disposition.starting");
      attr(input0, "type", "number");
      input0.value = input0_value_value = ctx[0].system.disposition.starting;
      attr(input0, "placeholder", "0");
      attr(startingBox, "class", "svelte-ujgmh3");
      attr(label1, "class", "header svelte-ujgmh3");
      attr(input1, "class", "disposition-value svelte-ujgmh3");
      attr(input1, "name", "system.disposition.current");
      attr(input1, "type", "number");
      input1.value = input1_value_value = ctx[0].system.disposition.current;
      attr(input1, "placeholder", "0");
      attr(currentBox, "class", "svelte-ujgmh3");
      attr(dispoBox, "class", "svelte-ujgmh3");
      attr(largecard, "class", "svelte-ujgmh3");
    },
    m(target, anchor) {
      insert(target, largecard, anchor);
      append(largecard, h1);
      append(largecard, t1);
      append(largecard, dispoBox);
      append(dispoBox, startingBox);
      append(startingBox, label0);
      append(startingBox, t5);
      append(startingBox, input0);
      append(dispoBox, t6);
      append(dispoBox, currentBox);
      append(currentBox, label1);
      append(currentBox, t10);
      append(currentBox, input1);
    },
    p(ctx2, [dirty]) {
      if (dirty & 1 && input0_value_value !== (input0_value_value = ctx2[0].system.disposition.starting)) {
        input0.value = input0_value_value;
      }
      if (dirty & 1 && input1_value_value !== (input1_value_value = ctx2[0].system.disposition.current)) {
        input1.value = input1_value_value;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(largecard);
    }
  };
}
function instance8($$self, $$props, $$invalidate) {
  let $sheetData;
  let sheetData = getContext("sheetStore");
  component_subscribe($$self, sheetData, (value) => $$invalidate(2, $sheetData = value));
  let data;
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 4) {
      $:
        $$invalidate(0, data = $sheetData.data);
    }
  };
  return [data, sheetData, $sheetData];
}
var MouseGuardActorSheetMouseDispo = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance8, create_fragment9, safe_not_equal, {});
  }
};
var MouseGuardActorSheetMouseDispo_default = MouseGuardActorSheetMouseDispo;
require_9();

// module/svelte/MouseGuardActorSheetMousePortrait.svelte
function create_fragment10(ctx) {
  let portrait;
  let img;
  let img_src_value;
  let img_title_value;
  let mounted;
  let dispose;
  return {
    c() {
      portrait = element("portrait");
      img = element("img");
      attr(img, "class", "profile-img svelte-1qaezql");
      if (img.src !== (img_src_value = ctx[0].img))
        attr(img, "src", img_src_value);
      attr(img, "data-edit", "img");
      attr(img, "title", img_title_value = ctx[0].name);
      attr(img, "height", "100");
      attr(img, "width", "100");
    },
    m(target, anchor) {
      insert(target, portrait, anchor);
      append(portrait, img);
      if (!mounted) {
        dispose = listen(img, "click", ctx[2]);
        mounted = true;
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & 1 && img.src !== (img_src_value = ctx2[0].img)) {
        attr(img, "src", img_src_value);
      }
      if (dirty & 1 && img_title_value !== (img_title_value = ctx2[0].name)) {
        attr(img, "title", img_title_value);
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(portrait);
      mounted = false;
      dispose();
    }
  };
}
function instance9($$self, $$props, $$invalidate) {
  let $sheetData;
  let sheetData = getContext("sheetStore");
  component_subscribe($$self, sheetData, (value) => $$invalidate(3, $sheetData = value));
  let { actor, sheet } = $sheetData;
  let data;
  const filePicker = (event) => {
    const attr2 = event.currentTarget.dataset.edit;
    const current = getProperty(data, attr2);
    const fp = new FilePicker({
      type: "image",
      current,
      callback: (path) => {
        actor.update({ [attr2]: path });
      },
      top: sheet.position.top + 40,
      left: sheet.position.left + 10
    });
    return fp.browse();
  };
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 8) {
      $:
        $$invalidate(0, data = $sheetData.data);
    }
  };
  return [data, sheetData, filePicker, $sheetData];
}
var MouseGuardActorSheetMousePortrait = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance9, create_fragment10, safe_not_equal, {});
  }
};
var MouseGuardActorSheetMousePortrait_default = MouseGuardActorSheetMousePortrait;
require_10();

// module/svelte/MouseGuardActorSheetMouseName.svelte
function create_fragment11(ctx) {
  let div;
  let label;
  let t1;
  let input;
  let input_value_value;
  let input_placeholder_value;
  return {
    c() {
      div = element("div");
      label = element("label");
      label.textContent = `${game.i18n.localize("MOUSEGUARD.Name")}`;
      t1 = space();
      input = element("input");
      attr(label, "class", "svelte-1ktqi3y");
      attr(input, "name", "name");
      attr(input, "type", "text");
      input.value = input_value_value = ctx[0].name;
      attr(input, "placeholder", input_placeholder_value = game.i18n.localize("MOUSEGUARD.Name"));
      attr(input, "class", "svelte-1ktqi3y");
      attr(div, "class", "namebox svelte-1ktqi3y");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, label);
      append(div, t1);
      append(div, input);
    },
    p(ctx2, [dirty]) {
      if (dirty & 1 && input_value_value !== (input_value_value = ctx2[0].name) && input.value !== input_value_value) {
        input.value = input_value_value;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(div);
    }
  };
}
function instance10($$self, $$props, $$invalidate) {
  let $sheetData;
  let sheetData = getContext("sheetStore");
  component_subscribe($$self, sheetData, (value) => $$invalidate(2, $sheetData = value));
  let data;
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 4) {
      $:
        $$invalidate(0, data = $sheetData.data);
    }
  };
  return [data, sheetData, $sheetData];
}
var MouseGuardActorSheetMouseName = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance10, create_fragment11, safe_not_equal, {});
  }
};
var MouseGuardActorSheetMouseName_default = MouseGuardActorSheetMouseName;
require_11();

// module/svelte/MouseGuardActorSheetBase.svelte
function get_each_context5(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[4] = list[i];
  return child_ctx;
}
function create_each_block5(ctx) {
  let a;
  let t0_value = ctx[4].label + "";
  let t0;
  let t1;
  let a_class_value;
  let mounted;
  let dispose;
  return {
    c() {
      a = element("a");
      t0 = text(t0_value);
      t1 = space();
      attr(a, "class", a_class_value = "item " + (ctx[0] === ctx[4].component ? "active" : ""));
    },
    m(target, anchor) {
      insert(target, a, anchor);
      append(a, t0);
      append(a, t1);
      if (!mounted) {
        dispose = listen(a, "click", ctx[2](ctx[4].component));
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & 1 && a_class_value !== (a_class_value = "item " + (ctx[0] === ctx[4].component ? "active" : ""))) {
        attr(a, "class", a_class_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(a);
      mounted = false;
      dispose();
    }
  };
}
function create_if_block6(ctx) {
  let switch_instance;
  let switch_instance_anchor;
  let current;
  var switch_value = ctx[0];
  function switch_props(ctx2) {
    return {};
  }
  if (switch_value) {
    switch_instance = new switch_value(switch_props(ctx));
  }
  return {
    c() {
      if (switch_instance)
        create_component(switch_instance.$$.fragment);
      switch_instance_anchor = empty();
    },
    m(target, anchor) {
      if (switch_instance) {
        mount_component(switch_instance, target, anchor);
      }
      insert(target, switch_instance_anchor, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      if (switch_value !== (switch_value = ctx2[0])) {
        if (switch_instance) {
          group_outros();
          const old_component = switch_instance;
          transition_out(old_component.$$.fragment, 1, 0, () => {
            destroy_component(old_component, 1);
          });
          check_outros();
        }
        if (switch_value) {
          switch_instance = new switch_value(switch_props(ctx2));
          create_component(switch_instance.$$.fragment);
          transition_in(switch_instance.$$.fragment, 1);
          mount_component(switch_instance, switch_instance_anchor.parentNode, switch_instance_anchor);
        } else {
          switch_instance = null;
        }
      } else if (switch_value) {
      }
    },
    i(local) {
      if (current)
        return;
      if (switch_instance)
        transition_in(switch_instance.$$.fragment, local);
      current = true;
    },
    o(local) {
      if (switch_instance)
        transition_out(switch_instance.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(switch_instance_anchor);
      if (switch_instance)
        destroy_component(switch_instance, detaching);
    }
  };
}
function create_fragment12(ctx) {
  let content;
  let div1;
  let div0;
  let mouseguardactorsheetmousename;
  let t0;
  let nav;
  let t1;
  let mouseguardactorsheetportrait;
  let t2;
  let div2;
  let current;
  mouseguardactorsheetmousename = new MouseGuardActorSheetMouseName_default({});
  let each_value = ctx[1];
  let each_blocks = [];
  for (let i = 0; i < each_value.length; i += 1) {
    each_blocks[i] = create_each_block5(get_each_context5(ctx, each_value, i));
  }
  mouseguardactorsheetportrait = new MouseGuardActorSheetMousePortrait_default({});
  let if_block = ctx[0] && create_if_block6(ctx);
  return {
    c() {
      content = element("content");
      div1 = element("div");
      div0 = element("div");
      create_component(mouseguardactorsheetmousename.$$.fragment);
      t0 = space();
      nav = element("nav");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      t1 = space();
      create_component(mouseguardactorsheetportrait.$$.fragment);
      t2 = space();
      div2 = element("div");
      if (if_block)
        if_block.c();
      attr(nav, "class", "sheet-navigation tabs");
      attr(div0, "class", "flex-item svelte-1i8sr00");
      attr(div1, "class", "flex-container svelte-1i8sr00");
      attr(div2, "class", "box svelte-1i8sr00");
      attr(content, "class", "svelte-1i8sr00");
    },
    m(target, anchor) {
      insert(target, content, anchor);
      append(content, div1);
      append(div1, div0);
      mount_component(mouseguardactorsheetmousename, div0, null);
      append(div0, t0);
      append(div0, nav);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(nav, null);
      }
      append(div1, t1);
      mount_component(mouseguardactorsheetportrait, div1, null);
      append(content, t2);
      append(content, div2);
      if (if_block)
        if_block.m(div2, null);
      current = true;
    },
    p(ctx2, [dirty]) {
      if (dirty & 7) {
        each_value = ctx2[1];
        let i;
        for (i = 0; i < each_value.length; i += 1) {
          const child_ctx = get_each_context5(ctx2, each_value, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block5(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(nav, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value.length;
      }
      if (ctx2[0]) {
        if (if_block) {
          if_block.p(ctx2, dirty);
          if (dirty & 1) {
            transition_in(if_block, 1);
          }
        } else {
          if_block = create_if_block6(ctx2);
          if_block.c();
          transition_in(if_block, 1);
          if_block.m(div2, null);
        }
      } else if (if_block) {
        group_outros();
        transition_out(if_block, 1, 1, () => {
          if_block = null;
        });
        check_outros();
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(mouseguardactorsheetmousename.$$.fragment, local);
      transition_in(mouseguardactorsheetportrait.$$.fragment, local);
      transition_in(if_block);
      current = true;
    },
    o(local) {
      transition_out(mouseguardactorsheetmousename.$$.fragment, local);
      transition_out(mouseguardactorsheetportrait.$$.fragment, local);
      transition_out(if_block);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(content);
      destroy_component(mouseguardactorsheetmousename);
      destroy_each(each_blocks, detaching);
      destroy_component(mouseguardactorsheetportrait);
      if (if_block)
        if_block.d();
    }
  };
}
function instance11($$self, $$props, $$invalidate) {
  let { dataStore } = $$props;
  setContext("sheetStore", dataStore);
  let items = [
    {
      label: game.i18n.localize("MOUSEGUARD.About"),
      component: MouseGuardActorSheetMouseDetails_default
    },
    {
      label: game.i18n.localize("MOUSEGUARD.Tab2"),
      value: 2,
      component: MouseGuardActorSheetMouseSkillAbilityTab_default
    },
    {
      label: game.i18n.localize("MOUSEGUARD.Rewards"),
      component: MouseGuardActorSheetMouseRewards_default
    },
    {
      label: game.i18n.localize("MOUSEGUARD.Disposition"),
      component: MouseGuardActorSheetMouseDispo_default
    }
  ];
  let { activeTabValue = items[0].component } = $$props;
  const handleClick = (tabValue) => () => $$invalidate(0, activeTabValue = tabValue);
  $$self.$$set = ($$props2) => {
    if ("dataStore" in $$props2)
      $$invalidate(3, dataStore = $$props2.dataStore);
    if ("activeTabValue" in $$props2)
      $$invalidate(0, activeTabValue = $$props2.activeTabValue);
  };
  return [activeTabValue, items, handleClick, dataStore];
}
var MouseGuardActorSheetBase = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance11, create_fragment12, safe_not_equal, { dataStore: 3, activeTabValue: 0 });
  }
};
var MouseGuardActorSheetBase_default = MouseGuardActorSheetBase;
require_12();

// node_modules/svelte/store/index.mjs
var subscriber_queue = [];
function writable(value, start = noop) {
  let stop;
  const subscribers = [];
  function set(new_value) {
    if (safe_not_equal(value, new_value)) {
      value = new_value;
      if (stop) {
        const run_queue = !subscriber_queue.length;
        for (let i = 0; i < subscribers.length; i += 1) {
          const s = subscribers[i];
          s[1]();
          subscriber_queue.push(s, value);
        }
        if (run_queue) {
          for (let i = 0; i < subscriber_queue.length; i += 2) {
            subscriber_queue[i][0](subscriber_queue[i + 1]);
          }
          subscriber_queue.length = 0;
        }
      }
    }
  }
  function update2(fn) {
    set(fn(value));
  }
  function subscribe2(run2, invalidate = noop) {
    const subscriber = [run2, invalidate];
    subscribers.push(subscriber);
    if (subscribers.length === 1) {
      stop = start(set) || noop;
    }
    run2(value);
    return () => {
      const index = subscribers.indexOf(subscriber);
      if (index !== -1) {
        subscribers.splice(index, 1);
      }
      if (subscribers.length === 0) {
        stop();
        stop = null;
      }
    };
  }
  return { set, update: update2, subscribe: subscribe2 };
}

// module/actor-sheet.js
var MouseGuardActorSheet = class extends ActorSheet {
  app = null;
  dataStore = null;
  static get defaultOptions() {
    return foundry.utils.mergeObject(super.defaultOptions, {
      classes: ["mouseguard", "sheet", "actor"],
      template: "systems/mouseguard/templates/actor-sheetv2.html",
      width: 850,
      height: 600,
      tabs: []
    });
  }
  getData() {
    const context = super.getData();
    context.sheet = this;
    return context;
  }
  activateListeners(html) {
    super.activateListeners(html);
    if (!this.isEditable)
      return;
    html.find(".item-control").click(this._onItemControl.bind(this));
    html.find(".items .rollable").on("click", this._onItemRoll.bind(this));
  }
  _onItemControl(event) {
    event.preventDefault();
    const button = event.currentTarget;
    const li = button.closest(".item");
    const item2 = this.actor.items.get(li?.dataset.itemId);
    switch (button.dataset.action) {
      case "create":
        const cls = getDocumentClass("Item");
        return cls.create({
          name: game.i18n.localize("MOUSEGUARD.ItemNew"),
          type: "item"
        }, { parent: this.actor });
      case "edit":
        return item2.sheet.render(true);
      case "delete":
        return item2.delete();
    }
  }
  _onItemRoll(event) {
    let button = $(event.currentTarget);
    const li = button.parents(".item");
    const item2 = this.actor.items.get(li.data("itemId"));
    let r = new Roll(button.data("roll"), this.actor.getRollData());
    return r.toMessage({
      user: game.user.id,
      speaker: ChatMessage.getSpeaker({ actor: this.actor }),
      flavor: `<h2>${item2.name}</h2><h3>${button.text()}</h3>`
    });
  }
  __onSubmit(event) {
    event = super._onSubmit(event);
    console.log(event);
    return event;
  }
  _getSubmitData(updateData) {
    let formData = super._getSubmitData(updateData);
    return formData;
  }
  _setMouseDice(count, message = "") {
    game.mouseguard.RollCount = count;
    game.mouseguard.RollMessage = message;
    game.mouseguard.updateDisplay(count);
  }
  async _updateActorAbility(id, type, value) {
    await this.actor.updateEmbeddedDocuments("Item", [
      { _id: id, data: { [type]: value } }
    ]);
  }
  async _updateEmbededItem(id, _data) {
    await this.actor.updateEmbeddedDocuments("Item", [
      { _id: id, data: _data }
    ]);
  }
  async _onItemDelete(itemId) {
    console.log(itemId);
    const item2 = this.actor.items.get(itemId);
    item2.delete();
    this.render();
  }
  async _onItemCreate(event) {
    event.preventDefault();
    const header = event.currentTarget;
    const type = header.dataset.type;
    const data = duplicate(header.dataset);
    const name = `New ${type.capitalize()}`;
    const itemData = {
      name,
      type,
      data
    };
    itemData.data = { rank: 1 };
    delete itemData.data["type"];
    return await Item.create(itemData, { parent: this.actor }).then((item2) => {
      item2.sheet.render(true);
    });
  }
  render(force = false, options = {}) {
    let sheetData = this.getData();
    if (this.app !== null) {
      let states = Application.RENDER_STATES;
      if (this._state == states.RENDERING || this._state == states.RENDERED) {
        this.dataStore?.set(sheetData);
        return;
      }
    }
    this._render(force, options).catch((err) => {
      err.message = `An error occurred while rendering ${this.constructor.name} ${this.appId}: ${err.message}`;
      console.error(err);
      this._state = Application.RENDER_STATES.ERROR;
    }).then((rendered) => {
      this.dataStore = writable(sheetData);
      this.app = new MouseGuardActorSheetBase_default({
        target: this.element.find("form").get(0),
        props: {
          dataStore: this.dataStore
        }
      });
    });
    options.editable = options.editable ?? this.object.isOwner;
    this.object.apps[this.appId] = this;
    return this;
  }
  close(options = {}) {
    if (this.app != null) {
      this.app.$destroy();
      this.app = null;
      this.dataStore = null;
    }
    return super.close(options);
  }
};

// module/svelte/MouseGuardActorSheetHeader.svelte
function create_fragment13(ctx) {
  let actorhead;
  let div1;
  let div0;
  let mouseguardactorsheetmousename;
  let t;
  let mouseguardactorsheetportrait;
  let current;
  mouseguardactorsheetmousename = new MouseGuardActorSheetMouseName_default({});
  mouseguardactorsheetportrait = new MouseGuardActorSheetMousePortrait_default({});
  return {
    c() {
      actorhead = element("actorhead");
      div1 = element("div");
      div0 = element("div");
      create_component(mouseguardactorsheetmousename.$$.fragment);
      t = space();
      create_component(mouseguardactorsheetportrait.$$.fragment);
      attr(div0, "class", "flex-item svelte-b0h6ac");
      attr(div1, "class", "flex-container svelte-b0h6ac");
    },
    m(target, anchor) {
      insert(target, actorhead, anchor);
      append(actorhead, div1);
      append(div1, div0);
      mount_component(mouseguardactorsheetmousename, div0, null);
      append(div1, t);
      mount_component(mouseguardactorsheetportrait, div1, null);
      current = true;
    },
    p: noop,
    i(local) {
      if (current)
        return;
      transition_in(mouseguardactorsheetmousename.$$.fragment, local);
      transition_in(mouseguardactorsheetportrait.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(mouseguardactorsheetmousename.$$.fragment, local);
      transition_out(mouseguardactorsheetportrait.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(actorhead);
      destroy_component(mouseguardactorsheetmousename);
      destroy_component(mouseguardactorsheetportrait);
    }
  };
}
function instance12($$self, $$props, $$invalidate) {
  let $sheetData;
  let sheetData = getContext("sheetStore");
  component_subscribe($$self, sheetData, (value) => $$invalidate(1, $sheetData = value));
  let { actor, sheet } = $sheetData;
  let data;
  console.log(data);
  const filePicker = (event) => {
    const attr2 = event.currentTarget.dataset.edit;
    const current = getProperty(data, attr2);
    const fp = new FilePicker({
      type: "image",
      current,
      callback: (path) => {
        actor.update({ [attr2]: path });
      },
      top: sheet.position.top + 40,
      left: sheet.position.left + 10
    });
    return fp.browse();
  };
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 2) {
      $:
        data = $sheetData.data;
    }
  };
  return [sheetData, $sheetData];
}
var MouseGuardActorSheetHeader = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance12, create_fragment13, safe_not_equal, {});
  }
};
var MouseGuardActorSheetHeader_default = MouseGuardActorSheetHeader;
require_13();

// module/svelte/MouseGuardNPCActorSheetBody.svelte
function get_each_context6(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[16] = list[i];
  return child_ctx;
}
function get_each_context_15(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[19] = list[i];
  return child_ctx;
}
function get_each_context_25(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[22] = list[i];
  return child_ctx;
}
function get_each_context_3(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[25] = list[i];
  return child_ctx;
}
function create_each_block_3(ctx) {
  let ability;
  let div;
  let label;
  let a;
  let t0_value = game.i18n.localize(ctx[25].name) + "";
  let t0;
  let t1;
  let t2;
  let input;
  let input_name_value;
  let input_value_value;
  let div_name_value;
  let t3;
  let mounted;
  let dispose;
  function click_handler(...args) {
    return ctx[7](ctx[25], ...args);
  }
  return {
    c() {
      ability = element("ability");
      div = element("div");
      label = element("label");
      a = element("a");
      t0 = text(t0_value);
      t1 = text(":");
      t2 = space();
      input = element("input");
      t3 = space();
      attr(label, "class", "header svelte-1f8afzj");
      attr(input, "name", input_name_value = ctx[25].id);
      attr(input, "type", "number");
      attr(input, "min", "0");
      input.value = input_value_value = ctx[25].system.rating;
      attr(input, "class", "svelte-1f8afzj");
      attr(div, "name", div_name_value = ctx[25].id);
      attr(ability, "class", "svelte-1f8afzj");
    },
    m(target, anchor) {
      insert(target, ability, anchor);
      append(ability, div);
      append(div, label);
      append(label, a);
      append(a, t0);
      append(label, t1);
      append(div, t2);
      append(div, input);
      append(ability, t3);
      if (!mounted) {
        dispose = [
          listen(label, "click", click_handler),
          listen(input, "change", ctx[8])
        ];
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & 1 && t0_value !== (t0_value = game.i18n.localize(ctx[25].name) + ""))
        set_data(t0, t0_value);
      if (dirty & 1 && input_name_value !== (input_name_value = ctx[25].id)) {
        attr(input, "name", input_name_value);
      }
      if (dirty & 1 && input_value_value !== (input_value_value = ctx[25].system.rating)) {
        input.value = input_value_value;
      }
      if (dirty & 1 && div_name_value !== (div_name_value = ctx[25].id)) {
        attr(div, "name", div_name_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(ability);
      mounted = false;
      run_all(dispose);
    }
  };
}
function create_if_block_22(ctx) {
  let div;
  let largecard;
  let h1;
  let t1;
  let each_value_2 = ctx[1];
  let each_blocks = [];
  for (let i = 0; i < each_value_2.length; i += 1) {
    each_blocks[i] = create_each_block_25(get_each_context_25(ctx, each_value_2, i));
  }
  return {
    c() {
      div = element("div");
      largecard = element("largecard");
      h1 = element("h1");
      h1.textContent = `${game.i18n.localize("MOUSEGUARD.Skills")}`;
      t1 = space();
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      attr(h1, "class", "svelte-1f8afzj");
      attr(largecard, "class", "svelte-1f8afzj");
      attr(div, "class", "box svelte-1f8afzj");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, largecard);
      append(largecard, h1);
      append(largecard, t1);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(largecard, null);
      }
    },
    p(ctx2, dirty) {
      if (dirty & 34) {
        each_value_2 = ctx2[1];
        let i;
        for (i = 0; i < each_value_2.length; i += 1) {
          const child_ctx = get_each_context_25(ctx2, each_value_2, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block_25(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(largecard, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value_2.length;
      }
    },
    d(detaching) {
      if (detaching)
        detach(div);
      destroy_each(each_blocks, detaching);
    }
  };
}
function create_each_block_25(ctx) {
  let skill;
  let div0;
  let label;
  let a0;
  let t0_value = game.i18n.localize(ctx[22].name) + "";
  let t0;
  let t1;
  let t2;
  let input;
  let input_name_value;
  let input_value_value;
  let div0_name_value;
  let t3;
  let div1;
  let a1;
  let t4;
  let mounted;
  let dispose;
  function click_handler_1(...args) {
    return ctx[9](ctx[22], ...args);
  }
  return {
    c() {
      skill = element("skill");
      div0 = element("div");
      label = element("label");
      a0 = element("a");
      t0 = text(t0_value);
      t1 = text(":");
      t2 = space();
      input = element("input");
      t3 = space();
      div1 = element("div");
      a1 = element("a");
      a1.innerHTML = `<i class="fas fa-trash"></i>`;
      t4 = space();
      attr(label, "class", "header svelte-1f8afzj");
      attr(input, "name", input_name_value = ctx[22].id);
      attr(input, "type", "number");
      input.value = input_value_value = ctx[22].system.rank;
      attr(input, "class", "svelte-1f8afzj");
      attr(div0, "name", div0_name_value = ctx[22].id);
      attr(a1, "class", "item-control item-delete");
      attr(a1, "title", "Delete Item");
      attr(div1, "class", "item-controls");
      attr(skill, "class", "svelte-1f8afzj");
    },
    m(target, anchor) {
      insert(target, skill, anchor);
      append(skill, div0);
      append(div0, label);
      append(label, a0);
      append(a0, t0);
      append(label, t1);
      append(div0, t2);
      append(div0, input);
      append(skill, t3);
      append(skill, div1);
      append(div1, a1);
      append(skill, t4);
      if (!mounted) {
        dispose = [
          listen(label, "click", click_handler_1),
          listen(input, "change", ctx[10]),
          listen(a1, "click", function() {
            if (is_function(ctx[5]?._onItemDelete(ctx[22]._id)))
              ctx[5]?._onItemDelete(ctx[22]._id).apply(this, arguments);
          })
        ];
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & 2 && t0_value !== (t0_value = game.i18n.localize(ctx[22].name) + ""))
        set_data(t0, t0_value);
      if (dirty & 2 && input_name_value !== (input_name_value = ctx[22].id)) {
        attr(input, "name", input_name_value);
      }
      if (dirty & 2 && input_value_value !== (input_value_value = ctx[22].system.rank)) {
        input.value = input_value_value;
      }
      if (dirty & 2 && div0_name_value !== (div0_name_value = ctx[22].id)) {
        attr(div0, "name", div0_name_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(skill);
      mounted = false;
      run_all(dispose);
    }
  };
}
function create_if_block_15(ctx) {
  let div;
  let largecard;
  let h1;
  let t1;
  let each_value_1 = ctx[3];
  let each_blocks = [];
  for (let i = 0; i < each_value_1.length; i += 1) {
    each_blocks[i] = create_each_block_15(get_each_context_15(ctx, each_value_1, i));
  }
  return {
    c() {
      div = element("div");
      largecard = element("largecard");
      h1 = element("h1");
      h1.textContent = `${game.i18n.localize("MOUSEGUARD.Traits")}`;
      t1 = space();
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      attr(h1, "class", "svelte-1f8afzj");
      attr(largecard, "class", "svelte-1f8afzj");
      attr(div, "class", "box svelte-1f8afzj");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, largecard);
      append(largecard, h1);
      append(largecard, t1);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(largecard, null);
      }
    },
    p(ctx2, dirty) {
      if (dirty & 40) {
        each_value_1 = ctx2[3];
        let i;
        for (i = 0; i < each_value_1.length; i += 1) {
          const child_ctx = get_each_context_15(ctx2, each_value_1, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block_15(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(largecard, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value_1.length;
      }
    },
    d(detaching) {
      if (detaching)
        detach(div);
      destroy_each(each_blocks, detaching);
    }
  };
}
function create_each_block_15(ctx) {
  let trait;
  let div0;
  let label;
  let a0;
  let t0_value = game.i18n.localize(ctx[19].name) + "";
  let t0;
  let t1;
  let t2;
  let input;
  let input_name_value;
  let input_value_value;
  let div0_name_value;
  let t3;
  let div1;
  let a1;
  let t4;
  let mounted;
  let dispose;
  function click_handler_2(...args) {
    return ctx[11](ctx[19], ...args);
  }
  return {
    c() {
      trait = element("trait");
      div0 = element("div");
      label = element("label");
      a0 = element("a");
      t0 = text(t0_value);
      t1 = text(":");
      t2 = space();
      input = element("input");
      t3 = space();
      div1 = element("div");
      a1 = element("a");
      a1.innerHTML = `<i class="fas fa-trash"></i>`;
      t4 = space();
      attr(label, "class", "header svelte-1f8afzj");
      attr(input, "name", input_name_value = ctx[19].id);
      attr(input, "type", "number");
      input.value = input_value_value = ctx[19].system.level;
      attr(input, "class", "svelte-1f8afzj");
      attr(div0, "name", div0_name_value = ctx[19].id);
      attr(a1, "class", "item-control item-delete");
      attr(a1, "title", "Delete Item");
      attr(div1, "class", "item-controls");
      attr(trait, "class", "svelte-1f8afzj");
    },
    m(target, anchor) {
      insert(target, trait, anchor);
      append(trait, div0);
      append(div0, label);
      append(label, a0);
      append(a0, t0);
      append(label, t1);
      append(div0, t2);
      append(div0, input);
      append(trait, t3);
      append(trait, div1);
      append(div1, a1);
      append(trait, t4);
      if (!mounted) {
        dispose = [
          listen(label, "click", click_handler_2),
          listen(input, "change", ctx[12]),
          listen(a1, "click", function() {
            if (is_function(ctx[5]?._onItemDelete(ctx[19]._id)))
              ctx[5]?._onItemDelete(ctx[19]._id).apply(this, arguments);
          })
        ];
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & 8 && t0_value !== (t0_value = game.i18n.localize(ctx[19].name) + ""))
        set_data(t0, t0_value);
      if (dirty & 8 && input_name_value !== (input_name_value = ctx[19].id)) {
        attr(input, "name", input_name_value);
      }
      if (dirty & 8 && input_value_value !== (input_value_value = ctx[19].system.level)) {
        input.value = input_value_value;
      }
      if (dirty & 8 && div0_name_value !== (div0_name_value = ctx[19].id)) {
        attr(div0, "name", div0_name_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(trait);
      mounted = false;
      run_all(dispose);
    }
  };
}
function create_if_block7(ctx) {
  let h1;
  let t1;
  let each_1_anchor;
  let each_value = ctx[2];
  let each_blocks = [];
  for (let i = 0; i < each_value.length; i += 1) {
    each_blocks[i] = create_each_block6(get_each_context6(ctx, each_value, i));
  }
  return {
    c() {
      h1 = element("h1");
      h1.textContent = `${game.i18n.localize("MOUSEGUARD.Wises")}`;
      t1 = space();
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      each_1_anchor = empty();
      attr(h1, "class", "svelte-1f8afzj");
    },
    m(target, anchor) {
      insert(target, h1, anchor);
      insert(target, t1, anchor);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(target, anchor);
      }
      insert(target, each_1_anchor, anchor);
    },
    p(ctx2, dirty) {
      if (dirty & 36) {
        each_value = ctx2[2];
        let i;
        for (i = 0; i < each_value.length; i += 1) {
          const child_ctx = get_each_context6(ctx2, each_value, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block6(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value.length;
      }
    },
    d(detaching) {
      if (detaching)
        detach(h1);
      if (detaching)
        detach(t1);
      destroy_each(each_blocks, detaching);
      if (detaching)
        detach(each_1_anchor);
    }
  };
}
function create_each_block6(ctx) {
  let wise;
  let div0;
  let label;
  let a0;
  let t0_value = game.i18n.localize(ctx[16].name) + "";
  let t0;
  let t1;
  let t2;
  let input;
  let input_name_value;
  let input_value_value;
  let div0_name_value;
  let t3;
  let div1;
  let a1;
  let t4;
  let mounted;
  let dispose;
  function click_handler_3(...args) {
    return ctx[13](ctx[16], ...args);
  }
  return {
    c() {
      wise = element("wise");
      div0 = element("div");
      label = element("label");
      a0 = element("a");
      t0 = text(t0_value);
      t1 = text(":");
      t2 = space();
      input = element("input");
      t3 = space();
      div1 = element("div");
      a1 = element("a");
      a1.innerHTML = `<i class="fas fa-trash"></i>`;
      t4 = space();
      attr(label, "class", "header svelte-1f8afzj");
      attr(input, "name", input_name_value = ctx[16].id);
      attr(input, "type", "number");
      input.value = input_value_value = ctx[16].system.rank;
      attr(input, "class", "svelte-1f8afzj");
      attr(div0, "name", div0_name_value = ctx[16].id);
      attr(a1, "class", "item-control item-delete");
      attr(a1, "title", "Delete Item");
      attr(div1, "class", "item-controls");
      attr(wise, "class", "svelte-1f8afzj");
    },
    m(target, anchor) {
      insert(target, wise, anchor);
      append(wise, div0);
      append(div0, label);
      append(label, a0);
      append(a0, t0);
      append(label, t1);
      append(div0, t2);
      append(div0, input);
      append(wise, t3);
      append(wise, div1);
      append(div1, a1);
      append(wise, t4);
      if (!mounted) {
        dispose = [
          listen(label, "click", click_handler_3),
          listen(input, "change", ctx[14]),
          listen(a1, "click", function() {
            if (is_function(ctx[5]?._onItemDelete(ctx[16]._id)))
              ctx[5]?._onItemDelete(ctx[16]._id).apply(this, arguments);
          })
        ];
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty & 4 && t0_value !== (t0_value = game.i18n.localize(ctx[16].name) + ""))
        set_data(t0, t0_value);
      if (dirty & 4 && input_name_value !== (input_name_value = ctx[16].id)) {
        attr(input, "name", input_name_value);
      }
      if (dirty & 4 && input_value_value !== (input_value_value = ctx[16].system.rank)) {
        input.value = input_value_value;
      }
      if (dirty & 4 && div0_name_value !== (div0_name_value = ctx[16].id)) {
        attr(div0, "name", div0_name_value);
      }
    },
    d(detaching) {
      if (detaching)
        detach(wise);
      mounted = false;
      run_all(dispose);
    }
  };
}
function create_fragment14(ctx) {
  let div1;
  let largecard;
  let h1;
  let t1;
  let div0;
  let t2;
  let show_if_2 = Object(ctx[1]).length > 0;
  let t3;
  let show_if_1 = Object(ctx[3]).length > 0;
  let t4;
  let show_if = Object(ctx[2]).length > 0;
  let if_block2_anchor;
  let each_value_3 = ctx[0];
  let each_blocks = [];
  for (let i = 0; i < each_value_3.length; i += 1) {
    each_blocks[i] = create_each_block_3(get_each_context_3(ctx, each_value_3, i));
  }
  let if_block0 = show_if_2 && create_if_block_22(ctx);
  let if_block1 = show_if_1 && create_if_block_15(ctx);
  let if_block2 = show_if && create_if_block7(ctx);
  return {
    c() {
      div1 = element("div");
      largecard = element("largecard");
      h1 = element("h1");
      h1.textContent = `${game.i18n.localize("MOUSEGUARD.Abilities")}`;
      t1 = space();
      div0 = element("div");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      t2 = space();
      if (if_block0)
        if_block0.c();
      t3 = space();
      if (if_block1)
        if_block1.c();
      t4 = space();
      if (if_block2)
        if_block2.c();
      if_block2_anchor = empty();
      attr(h1, "class", "svelte-1f8afzj");
      attr(div0, "class", "flex-container svelte-1f8afzj");
      attr(largecard, "class", "svelte-1f8afzj");
      attr(div1, "class", "box svelte-1f8afzj");
    },
    m(target, anchor) {
      insert(target, div1, anchor);
      append(div1, largecard);
      append(largecard, h1);
      append(largecard, t1);
      append(largecard, div0);
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].m(div0, null);
      }
      insert(target, t2, anchor);
      if (if_block0)
        if_block0.m(target, anchor);
      insert(target, t3, anchor);
      if (if_block1)
        if_block1.m(target, anchor);
      insert(target, t4, anchor);
      if (if_block2)
        if_block2.m(target, anchor);
      insert(target, if_block2_anchor, anchor);
    },
    p(ctx2, [dirty]) {
      if (dirty & 33) {
        each_value_3 = ctx2[0];
        let i;
        for (i = 0; i < each_value_3.length; i += 1) {
          const child_ctx = get_each_context_3(ctx2, each_value_3, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block_3(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(div0, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value_3.length;
      }
      if (dirty & 2)
        show_if_2 = Object(ctx2[1]).length > 0;
      if (show_if_2) {
        if (if_block0) {
          if_block0.p(ctx2, dirty);
        } else {
          if_block0 = create_if_block_22(ctx2);
          if_block0.c();
          if_block0.m(t3.parentNode, t3);
        }
      } else if (if_block0) {
        if_block0.d(1);
        if_block0 = null;
      }
      if (dirty & 8)
        show_if_1 = Object(ctx2[3]).length > 0;
      if (show_if_1) {
        if (if_block1) {
          if_block1.p(ctx2, dirty);
        } else {
          if_block1 = create_if_block_15(ctx2);
          if_block1.c();
          if_block1.m(t4.parentNode, t4);
        }
      } else if (if_block1) {
        if_block1.d(1);
        if_block1 = null;
      }
      if (dirty & 4)
        show_if = Object(ctx2[2]).length > 0;
      if (show_if) {
        if (if_block2) {
          if_block2.p(ctx2, dirty);
        } else {
          if_block2 = create_if_block7(ctx2);
          if_block2.c();
          if_block2.m(if_block2_anchor.parentNode, if_block2_anchor);
        }
      } else if (if_block2) {
        if_block2.d(1);
        if_block2 = null;
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(div1);
      destroy_each(each_blocks, detaching);
      if (detaching)
        detach(t2);
      if (if_block0)
        if_block0.d(detaching);
      if (detaching)
        detach(t3);
      if (if_block1)
        if_block1.d(detaching);
      if (detaching)
        detach(t4);
      if (if_block2)
        if_block2.d(detaching);
      if (detaching)
        detach(if_block2_anchor);
    }
  };
}
function instance13($$self, $$props, $$invalidate) {
  let skills;
  let wises;
  let traits;
  let $sheetData;
  let sheetData = getContext("sheetStore");
  component_subscribe($$self, sheetData, (value) => $$invalidate(6, $sheetData = value));
  let { sheet } = $sheetData;
  let data;
  let abilities;
  const click_handler = (ability, e) => setMouseDice(sheet, ability.system.rating);
  const change_handler = (e) => updateRating(sheet, e.target.name, "rating", parseInt(e.target.value));
  const click_handler_1 = (skill, e) => setMouseDice(sheet, skill.system.rank, game.i18n.localize(skill.name));
  const change_handler_1 = (e) => updateRating(sheet, e.target.name, "rank", parseInt(e.target.value));
  const click_handler_2 = (trait, e) => setMouseDice(sheet, trait.system.level, game.i18n.localize(trait.name));
  const change_handler_2 = (e) => updateRating(sheet, e.target.name, "level", parseInt(e.target.value));
  const click_handler_3 = (wise, e) => setMouseDice(sheet, wise.system.rank, game.i18n.localize(wise.name));
  const change_handler_3 = (e) => updateRating(sheet, e.target.name, "rank", parseInt(e.target.value));
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 64) {
      $:
        data = $sheetData.data;
    }
    if ($$self.$$.dirty & 64) {
      $:
        $$invalidate(0, abilities = $sheetData.data.system.itemTypes.ability);
    }
    if ($$self.$$.dirty & 64) {
      $:
        $$invalidate(1, skills = $sheetData.data.system.itemTypes.skill);
    }
    if ($$self.$$.dirty & 64) {
      $:
        $$invalidate(2, wises = $sheetData.data.system.itemTypes.wise);
    }
    if ($$self.$$.dirty & 64) {
      $:
        $$invalidate(3, traits = $sheetData.data.system.itemTypes.trait);
    }
  };
  return [
    abilities,
    skills,
    wises,
    traits,
    sheetData,
    sheet,
    $sheetData,
    click_handler,
    change_handler,
    click_handler_1,
    change_handler_1,
    click_handler_2,
    change_handler_2,
    click_handler_3,
    change_handler_3
  ];
}
var MouseGuardNPCActorSheetBody = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance13, create_fragment14, safe_not_equal, {});
  }
};
var MouseGuardNPCActorSheetBody_default = MouseGuardNPCActorSheetBody;
require_14();

// module/svelte/MouseGuardNPCActorSheetBase.svelte
function create_fragment15(ctx) {
  let div0;
  let mouseguardactorsheetheader;
  let t0;
  let div1;
  let mouseguardnpcactorsheetbody;
  let t1;
  let div2;
  let mouseguardactorsheetmousedispo;
  let current;
  mouseguardactorsheetheader = new MouseGuardActorSheetHeader_default({});
  mouseguardnpcactorsheetbody = new MouseGuardNPCActorSheetBody_default({});
  mouseguardactorsheetmousedispo = new MouseGuardActorSheetMouseDispo_default({});
  return {
    c() {
      div0 = element("div");
      create_component(mouseguardactorsheetheader.$$.fragment);
      t0 = space();
      div1 = element("div");
      create_component(mouseguardnpcactorsheetbody.$$.fragment);
      t1 = space();
      div2 = element("div");
      create_component(mouseguardactorsheetmousedispo.$$.fragment);
      attr(div0, "class", "box svelte-1tx1hpn");
      attr(div1, "class", "box svelte-1tx1hpn");
      attr(div2, "class", "box svelte-1tx1hpn");
    },
    m(target, anchor) {
      insert(target, div0, anchor);
      mount_component(mouseguardactorsheetheader, div0, null);
      insert(target, t0, anchor);
      insert(target, div1, anchor);
      mount_component(mouseguardnpcactorsheetbody, div1, null);
      insert(target, t1, anchor);
      insert(target, div2, anchor);
      mount_component(mouseguardactorsheetmousedispo, div2, null);
      current = true;
    },
    p: noop,
    i(local) {
      if (current)
        return;
      transition_in(mouseguardactorsheetheader.$$.fragment, local);
      transition_in(mouseguardnpcactorsheetbody.$$.fragment, local);
      transition_in(mouseguardactorsheetmousedispo.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(mouseguardactorsheetheader.$$.fragment, local);
      transition_out(mouseguardnpcactorsheetbody.$$.fragment, local);
      transition_out(mouseguardactorsheetmousedispo.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(div0);
      destroy_component(mouseguardactorsheetheader);
      if (detaching)
        detach(t0);
      if (detaching)
        detach(div1);
      destroy_component(mouseguardnpcactorsheetbody);
      if (detaching)
        detach(t1);
      if (detaching)
        detach(div2);
      destroy_component(mouseguardactorsheetmousedispo);
    }
  };
}
function instance14($$self, $$props, $$invalidate) {
  let { dataStore } = $$props;
  setContext("sheetStore", dataStore);
  $$self.$$set = ($$props2) => {
    if ("dataStore" in $$props2)
      $$invalidate(0, dataStore = $$props2.dataStore);
  };
  return [dataStore];
}
var MouseGuardNPCActorSheetBase = class extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance14, create_fragment15, safe_not_equal, { dataStore: 0 });
  }
};
var MouseGuardNPCActorSheetBase_default = MouseGuardNPCActorSheetBase;
require_15();

// module/npcactor-sheet.js
var MouseGuardNPCActorSheet = class extends ActorSheet {
  app = null;
  dataStore = null;
  static get defaultOptions() {
    return foundry.utils.mergeObject(super.defaultOptions, {
      classes: ["mouseguard", "sheet", "actor"],
      template: "systems/mouseguard/templates/actor-sheetv2.html",
      width: 550,
      height: 600,
      tabs: []
    });
  }
  getData() {
    const context = super.getData();
    context.systemData = context.system;
    context.sheet = this;
    return context;
  }
  activateListeners(html) {
    super.activateListeners(html);
    if (!this.isEditable)
      return;
    html.find(".item-control").click(this._onItemControl.bind(this));
    html.find(".items .rollable").on("click", this._onItemRoll.bind(this));
  }
  _onItemControl(event) {
    event.preventDefault();
    const button = event.currentTarget;
    const li = button.closest(".item");
    const item2 = this.actor.items.get(li?.dataset.itemId);
    switch (button.dataset.action) {
      case "create":
        const cls = getDocumentClass("Item");
        return cls.create({
          name: game.i18n.localize("MOUSEGUARD.ItemNew"),
          type: "item"
        }, { parent: this.actor });
      case "edit":
        return item2.sheet.render(true);
      case "delete":
        return item2.delete();
    }
  }
  _onItemRoll(event) {
    let button = $(event.currentTarget);
    const li = button.parents(".item");
    const item2 = this.actor.items.get(li.data("itemId"));
    let r = new Roll(button.data("roll"), this.actor.getRollData());
    return r.toMessage({
      user: game.user.id,
      speaker: ChatMessage.getSpeaker({ actor: this.actor }),
      flavor: `<h2>${item2.name}</h2><h3>${button.text()}</h3>`
    });
  }
  _getSubmitData(updateData) {
    let formData = super._getSubmitData(updateData);
    return formData;
  }
  _setMouseDice(count) {
    game.mouseguard.RollCount = count;
    game.mouseguard.updateDisplay(count);
  }
  async _updateActorAbility(id, type, value) {
    await this.actor.updateEmbeddedDocuments("Item", [
      { _id: id, data: { [type]: value } }
    ]);
  }
  async _updateEmbededItem(id, _data) {
    await this.actor.updateEmbeddedDocuments("Item", [
      { _id: id, data: _data }
    ]);
  }
  async _onItemDelete(itemId) {
    const item2 = this.actor.items.get(itemId);
    item2.delete();
    this.render();
  }
  async _onItemCreate(event) {
    event.preventDefault();
    const header = event.currentTarget;
    const type = header.dataset.type;
    const data = duplicate(header.dataset);
    const name = `New ${type.capitalize()}`;
    const itemData = {
      name,
      type,
      data
    };
    itemData.data = { rank: 1 };
    delete itemData.data["type"];
    return await Item.create(itemData, { parent: this.actor }).then((item2) => {
      item2.sheet.render(true);
    });
  }
  render(force = false, options = {}) {
    let sheetData = this.getData();
    if (this.app !== null) {
      let states = Application.RENDER_STATES;
      if (this._state == states.RENDERING || this._state == states.RENDERED) {
        this.dataStore?.set(sheetData);
        return;
      }
    }
    this._render(force, options).catch((err) => {
      err.message = `An error occurred while rendering ${this.constructor.name} ${this.appId}: ${err.message}`;
      console.error(err);
      this._state = Application.RENDER_STATES.ERROR;
    }).then((rendered) => {
      this.dataStore = writable(sheetData);
      this.app = new MouseGuardNPCActorSheetBase_default({
        target: this.element.find("form").get(0),
        props: {
          dataStore: this.dataStore
        }
      });
    });
    options.editable = options.editable ?? this.object.isOwner;
    this.object.apps[this.appId] = this;
    return this;
  }
  close(options = {}) {
    if (this.app != null) {
      this.app.$destroy();
      this.app = null;
      this.dataStore = null;
    }
    return super.close(options);
  }
};

// module/templates.js
var preloadHandlebarsTemplates = async function() {
  const templatePaths = [
    "systems/mouseguard/templates/parts/sheet-attributes.html",
    "systems/mouseguard/templates/parts/sheet-groups.html",
    "systems/mouseguard/templates/sidebar/combatant.html"
  ];
  return loadTemplates(templatePaths);
};

// module/macro.js
async function createMouseGuardMacro(data, slot) {
  const command = `const roll = new Roll("${data.roll}", actor ? actor.getRollData() : {});
  roll.toMessage({speaker, flavor: "${data.label}"});`;
  let macro = game.macros.entities.find((m) => m.name === item.label && m.command === command);
  if (!macro) {
    macro = await Macro.create({
      name: data.label,
      type: "script",
      command,
      flags: { "mouseguard.attrMacro": true }
    });
  }
  game.user.assignHotbarMacro(macro, slot);
  return false;
}

// module/mousedie.js
var MouseDie = class extends Die {
  constructor(termData) {
    termData.faces = 6;
    super(termData);
  }
  getResultLabel(result) {
    return {
      1: '<img src="systems/mouseguard/assets/dice/snake.png" />',
      2: '<img src="systems/mouseguard/assets/dice/snake.png" />',
      3: '<img src="systems/mouseguard/assets/dice/snake.png" />',
      4: '<img src="systems/mouseguard/assets/dice/sword.png" />',
      5: '<img src="systems/mouseguard/assets/dice/sword.png" />',
      6: '<img src="systems/mouseguard/assets/dice/axe.png" />'
    }[result.result];
  }
};
__publicField(MouseDie, "DENOMINATION", "m");
var mouseChatData = async (roll, chatOptions) => {
  const isPrivate = chatOptions.isPrivate;
  return {
    formula: isPrivate ? "???" : roll._formula,
    flavor: isPrivate ? null : chatOptions.flavor,
    user: chatOptions.user,
    tooltip: isPrivate ? "" : await roll.getTooltip(),
    result: isPrivate ? "?" : roll.result,
    dice_count: isPrivate ? "?" : roll.terms[0].number,
    drop: false,
    claimed: roll.claimed ?? false
  };
};
var MouseRoll = class extends Roll {
  constructor(...args) {
    super(...args);
  }
  async render(chatOptions = {}) {
    chatOptions = foundry.utils.mergeObject({
      user: game.user.id,
      flavor: null,
      template: this.constructor.CHAT_TEMPLATE,
      blind: false
    }, chatOptions);
    if (!this._evaluated)
      this.evaluate();
    let chatData = await mouseChatData(this, chatOptions);
    return renderTemplate(chatOptions.template, chatData);
  }
};
__publicField(MouseRoll, "CHAT_TEMPLATE", "systems/mouseguard/templates/dice/roll.html");

// module/conflict-tracker.js
var ConflictTracker = class extends FormApplication {
  constructor(object = {}, options = {}) {
    super(object, options);
    this.isRunningQueue = false;
    if (options?.menu) {
      this.menu = options.menu;
    }
  }
  static get defaultOptions() {
    return mergeObject(super.defaultOptions, {
      id: "conflict-tracker",
      classes: ["mouseguard"],
      title: "Conflict Tracker",
      template: "systems/mouseguard/templates/conflict-tracker.html"
    });
  }
  getData() {
    const context = super.getData();
    context.isGM = game.user.isGM;
    const x = $(window).width();
    this.position.left = x / 2 - 505 / 2;
    this.position.top = 10;
    this.position.width = 150;
    this.position.height = 105;
    return context;
  }
  async close(options = {}) {
  }
  activateListeners(html) {
  }
};

// module/mouse-combantant.js
var MouseCombatant = class extends Combatant {
  constructor(...args) {
    super(...args);
  }
  prepareDerivedData() {
    super.prepareDerivedData();
  }
  getData() {
    const context = super.getData();
    return context;
  }
  get ConflictCaptain() {
    return this.getFlag("mouseguard", "ConflictCaptain");
  }
  get team() {
    return this.getFlag("mouseguard", "Team");
  }
  async setConflictCaptain(value) {
    return this.setFlag("mouseguard", "ConflictCaptain", value);
  }
  async SetMove(move) {
    this.setFlag("mouseguard", "Moves", move);
  }
  async setTeam(value) {
    return this.setFlag("mouseguard", "Team", value);
  }
  async _preCreate(data, options, user) {
    await super._preCreate(data, options, user);
    let init2 = 0;
    let actor = game.actors.get(data.actorId);
    if (actor.type == "character")
      init2 = 1;
    this.updateSource({
      initiative: init2,
      flags: {
        mouseguard: {
          ConflictCaptain: false,
          Moves: [],
          Team: 0
        }
      }
    });
  }
  async doMove(id) {
    let Moves = this.getFlag("mouseguard", "Moves");
    let theMove = Moves.filter((item2) => item2.id == id);
    let template = "systems/mouseguard/templates/chat/combat-action.hbs";
    let data = { actor: [this.actor][0], move: theMove[0].move };
    var content = await renderTemplate(template, data);
    let chatData = {
      user: game.user._id,
      speaker: ChatMessage.getSpeaker({ actor: data.actor })
    };
    chatData.content = content;
    ChatMessage.create(chatData);
    let otherMoves = Moves.filter((item2) => item2.id !== id);
    this.SetMove(otherMoves);
  }
};

// module/socket.js
var MouseSocket = class {
  static async askGoal(data) {
    data.this = this;
    let dlg = await renderTemplate("systems/mouseguard/templates/parts/conflict-manager.hbs", data);
    new Dialog({
      title: `Conflict Manager`,
      content: dlg,
      buttons: {
        ok: {
          label: "Apply",
          callback: async (html) => {
            data.this.goalManager(html, data);
          }
        },
        cancel: {
          label: "Cancel"
        }
      }
    }).render(true);
  }
  static async goalManager(html, data) {
    let conflictGoal = html.find("#conflict_goal")[0].value;
    await game.socket.emit("system.mouseguard", {
      action: "setGoal",
      combat: data.combat._id,
      goal: conflictGoal
    });
  }
  static async setGoal(data) {
    if (game.user.isGM) {
      let combat = await game.combats.get(data.combat);
      combat.setGoal(data.goal);
      combat.setFlag("mouseguard", "goal", data.goal);
    }
  }
  static async askMoves(data) {
    ui.combat.renderPopout(true);
    let dlg = await renderTemplate("systems/mouseguard/templates/parts/conflict-move-manager.hbs", data);
    new Dialog({
      title: `Conflict Manager`,
      content: dlg,
      buttons: {
        ok: {
          label: game.i18n.localize("MOUSEGUARD.Send"),
          callback: async (html) => {
            let error = false;
            let Move1Actor = html.find("#move0-actor")[0].value;
            let Move1Move = html.find(".move0:checked").val();
            let Move2Actor = html.find("#move1-actor")[0].value;
            let Move2Move = html.find(".move1:checked").val();
            let Move3Actor = html.find("#move2-actor")[0].value;
            let Move3Move = html.find(".move2:checked").val();
            let CombatantData = {
              [Move1Actor]: [],
              [Move2Actor]: [],
              [Move3Actor]: []
            };
            if (!!Move1Move == false)
              error = true;
            if (!!Move2Move == false)
              error = true;
            if (!!Move3Move == false)
              error = true;
            if (error) {
              ui.notifications.error("An error occured while setting your moves. Please select new moves.");
              this.askMoves(data);
              return;
            }
            CombatantData[Move1Actor].push({
              id: randomID(),
              move: Move1Move,
              combatant: Move1Actor
            });
            CombatantData[Move2Actor].push({
              id: randomID(),
              move: Move2Move,
              combatant: Move2Actor
            });
            CombatantData[Move3Actor].push({
              id: randomID(),
              move: Move3Move,
              combatant: Move3Actor
            });
            let moveData = {
              action: "setMoves",
              combat: data.combat,
              data: CombatantData
            };
            if (data.npc == true) {
              moveData.combat = data.combat;
              this.setMoves(moveData);
            } else {
              await game.socket.emit("system.mouseguard", moveData);
            }
          }
        },
        cancel: {
          label: "Cancel"
        }
      }
    }).render(true);
  }
  static async moveManger(html, data) {
  }
  static async setMoves(data) {
    if (game.user.isGM) {
      let combat = await game.combats.get(data.combat._id);
      let x = Object.keys(data.data).length;
      for (const key of Object.keys(data.data)) {
        let combatant = await combat.combatants.get(key);
        await combatant.setFlag("mouseguard", "Moves", data.data[key]);
      }
    }
  }
};

// module/mouse-combat.js
var MouseCombat = class extends Combat {
  constructor(object = {}, options = {}) {
    super(object, options);
  }
  getData() {
    const context = super.getData();
    return context;
  }
  get getGoal1() {
    return this.getFlag("mouseguard", "goal1");
  }
  get getGoal2() {
    return this.getFlag("mouseguard", "goal2");
  }
  get getConflictCaptain() {
    return this.getFlag("mouseguard", "ConflictCaptain");
  }
  get getConflictCaptainTeam2() {
    return this.getFlag("mouseguard", "ConflictCaptain2");
  }
  async setConflictCaptain(value) {
    return this.setFlag("mouseguard", "ConflictCaptain", value);
  }
  async setConflictCaptainTeam2(value) {
    return this.setFlag("mouseguard", "ConflictCaptain2", value);
  }
  async _preCreate(data, options, user) {
    await super._preCreate(data, options, user);
    this.updateSource({
      flags: {
        mouseguard: {
          ConflictCaptain: null,
          ConflictCaptain2: null,
          goal1: null,
          goal2: null
        }
      }
    });
  }
  static _canUpdate(user, doc, data) {
    if (user.isGM)
      return true;
    const updateKeys = new Set(Object.keys(data));
    const allowedKeys = new Set(["_id", "initiative", "flags"]);
    return updateKeys.isSubset(allowedKeys);
  }
  async startCombat() {
    let goal = this.flags.mouseguard.goal;
    let CC = this.flags.mouseguard.ConflictCaptain;
    if (!CC) {
      ui.notifications.error(game.i18n.localize("COMBAT.NeedCC"));
      return false;
    }
    if (goal == null) {
      ui.notifications.error(game.i18n.localize("COMBAT.NeedGoal"));
      this.askGoal();
      return false;
    }
    if (!!goal != false && CC) {
      this.askMove();
      return this.update({ round: 1, turn: 0 });
    }
    return false;
  }
  getCCPlayer() {
    let combatant = this.combatants.get(this.getConflictCaptain);
    let actor = game.actors.get(combatant.actorId);
    let player;
    Object.keys(actor.ownership).forEach((key) => {
      if (actor.ownership[key] == 3) {
        let user = game.users.get(key);
        if (!user.isGM)
          player = user;
      }
    });
    return player;
  }
  async askGoal() {
    let CC = this.flags.mouseguard.ConflictCaptain;
    if (!CC) {
      ui.notifications.error("A Conflict Captain Must be set");
      return false;
    }
    let player = this.getCCPlayer();
    await game.socket.emit("system.mouseguard", { action: "askGoal", combat: this }, { recipients: [player._id] });
  }
  async setGoal(goal) {
    this.setFlag("mouseguard", "goal1", goal).then((content) => {
      this.startCombat();
    });
    return true;
  }
  async askMove() {
    let CC = this.flags.mouseguard.ConflictCaptain;
    if (!CC) {
      ui.notifications.error(game.i18n.localize("COMBAT.NeedCC"));
      return false;
    }
    let data = { combat: this };
    let team1 = [];
    let team2 = [];
    let combatants = this.combatants.filter((comb) => comb.team == "1");
    Object.keys(combatants).forEach((key) => {
      team1.push({
        combatant: combatants[key].id,
        name: combatants[key].token.name
      });
    });
    data.actors = team1;
    data.action = "askMoves";
    let player = this.getCCPlayer();
    await game.socket.emit("system.mouseguard", data, {
      recipients: [player._id]
    });
    let team2combatants = this.combatants.filter((comb) => comb.team == "2");
    Object.keys(team2combatants).forEach((key) => {
      team2.push({
        combatant: team2combatants[key].id,
        name: team2combatants[key].token.name
      });
    });
    data.actors = team2;
    data.npc = true;
    await MouseSocket.askMoves(data);
  }
  async askNPCMove(data) {
    MouseSocket.askMoves(data);
  }
  async nextRound() {
    let turn = 0;
    if (this.settings.skipDefeated) {
      turn = this.turns.findIndex((t) => {
        return !(t.defeated || t.actor?.effects.find((e) => e.getFlag("core", "statusId") === CONFIG.Combat.defeatedStatusId));
      });
      if (turn === -1) {
        ui.notifications.warn("COMBAT.NoneRemaining", {
          localize: true
        });
        turn = 0;
      }
    }
    let advanceTime = Math.max(this.turns.length - this.data.turn, 1) * CONFIG.time.turnTime;
    advanceTime += CONFIG.time.roundTime;
    this.askMove();
    return this.update({ round: this.round + 1, turn }, { advanceTime });
  }
};

// module/mouse-combat-tracker.js
var MouseCombatTracker = class extends CombatTracker {
  constructor(options) {
    super(options);
  }
  static get defaultOptions() {
    return foundry.utils.mergeObject(super.defaultOptions, {
      id: "combat",
      template: "systems/mouseguard/templates/sidebar/combat-tracker.html",
      title: "COMBAT.SidebarTitle",
      scrollY: [".directory-list"],
      dragDrop: [
        {
          dragSelector: "li.combatant.actor.directory-item.flexrow",
          dropSelector: "li[data-team]"
        }
      ]
    });
  }
  _canDragStart(ev) {
    console.log(ev);
    if (game.user.isGM)
      return true;
    return false;
  }
  _canDragDrop(ev) {
    console.log(ev);
    if (game.user.isGM)
      return true;
    return false;
  }
  _onDragDrop(ev) {
    super._onDrop(ev);
  }
  async _onDrop(ev) {
    super._onDrop(ev);
    let dropped_id = JSON.parse(ev.dataTransfer?.getData("text/plain")).id;
    let target = ev.target.closest("li").dataset.team;
    await this.viewed.combatants.get(dropped_id).setTeam(target);
  }
  _onDragStart(ev) {
    console.log(ev);
    ev.dataTransfer.setData("text/plain", JSON.stringify({ id: ev.target.dataset.combatantId }));
    console.log(ev);
  }
  _getEntryContextOptions() {
    return [
      {
        name: "COMBAT.ConflictCaptain",
        icon: '<i class="fas fa-crown"></i>',
        callback: (li) => {
          const combatant = this.viewed.combatants.get(li.data("combatant-id"));
          let Team = "";
          if (combatant.team == 2)
            Team = "2";
          if (combatant.team == 0)
            return;
          if (this.viewed.flags.mouseguard["ConflictCaptain" + Team] == combatant.id) {
            this.viewed.setFlag("mouseguard", "ConflictCaptain" + Team, NaN);
            return combatant.setFlag("mouseguard", "ConflictCaptain", false);
          }
          if (!!this.viewed.flags.mouseguard["ConflictCaptain" + Team] == false) {
            if (combatant) {
              this.viewed.setFlag("mouseguard", "ConflictCaptain" + Team, li.data("combatant-id"));
              return combatant.setFlag("mouseguard", "ConflictCaptain", true);
            }
          } else {
            ui.notifications.error(game.i18n.localize("COMBAT.CCSet"));
            return false;
          }
          console.log(this);
        }
      },
      {
        name: "COMBAT.CombatantUpdate",
        icon: '<i class="fas fa-edit"></i>',
        callback: this._onConfigureCombatant.bind(this)
      },
      {
        name: "Console.Log",
        icon: '<i class="fas fa-edit"></i>',
        callback: (li) => {
          const combatant = this.viewed.combatants.get(li.data("combatant-id"));
          if (combatant)
            console.log(combatant);
        }
      },
      {
        name: "COMBAT.CombatantRemove",
        icon: '<i class="fas fa-trash"></i>',
        callback: (li) => {
          const combatant = this.viewed.combatants.get(li.data("combatant-id"));
          if (combatant)
            return combatant.delete();
        }
      }
    ];
  }
  async _onCombatantControl(event) {
    event.preventDefault();
    event.stopPropagation();
    const btn = event.currentTarget;
    const li = btn.closest(".combatant");
    const combat = this.viewed;
    const c = combat.combatants.get(li.dataset.combatantId);
    switch (btn.dataset.control) {
      case "doMove":
        return c.doMove(btn.dataset.move);
      case "toggleHidden":
        return c.update({ hidden: !c.hidden });
      case "toggleDefeated":
        return this._onToggleDefeatedStatus(c);
      case "rollInitiative":
        return combat.rollInitiative([c.id]);
      case "pingCombatant":
        return this._onPingCombatant(c);
    }
  }
  async getData(options) {
    let context = await super.getData(options);
    if (context.combat) {
      for (let [i, combatant] of context.combat.turns.entries()) {
        context.turns[i].flags = combatant.flags;
        context.turns[i].isFirstOwner = this.isFirstOwner(combatant.actor);
        context.turns[i].hasPlayerOwner = this.hasPlayerOwner(combatant.actor);
      }
    }
    return context;
  }
  firstOwner(doc) {
    if (!doc)
      return false;
    const gmOwners = Object.entries(doc.ownership).filter(([id, level]) => game.users.get(id)?.isGM && game.users.get(id)?.active && level === 3).map(([id, level]) => id);
    const otherOwners = Object.entries(doc.ownership).filter(([id, level]) => !game.users.get(id)?.isGM && game.users.get(id)?.active && level === 3).map(([id, level]) => id);
    if (otherOwners.length > 0)
      return game.users.get(otherOwners[0]);
    else
      return game.users.get(gmOwners[0]);
  }
  isFirstOwner(doc) {
    return game.user.id === this.firstOwner(doc).id;
  }
  hasPlayerOwner(doc) {
    if (!doc)
      return false;
    const gmOwners = Object.entries(doc.ownership).filter(([id, level]) => game.users.get(id)?.isGM && game.users.get(id)?.active && level === 3).map(([id, level]) => id);
    const otherOwners = Object.entries(doc.ownership).filter(([id, level]) => !game.users.get(id)?.isGM && game.users.get(id)?.active && level === 3).map(([id, level]) => id);
    if (otherOwners.length > 0)
      return true;
    else
      return false;
  }
};

// module/mouseguard.js
Hooks.once("init", async function() {
  console.log(`Initializing MouseGuard MouseGuard System`);
  let RollCount = 0;
  let RollMessage = "";
  game.mouseguard = {
    MouseGuardActor,
    createMouseGuardMacro,
    RollCount,
    RollMessage,
    updateDisplay,
    MouseDie,
    MouseRoll
  };
  CONFIG.Actor.documentClass = MouseGuardActor;
  CONFIG.Item.documentClass = MouseGuardItem;
  CONFIG.Dice.rolls.push(MouseRoll);
  CONFIG.Combatant.documentClass = MouseCombatant;
  CONFIG.Combat.documentClass = MouseCombat;
  CONFIG.ui.combat = MouseCombatTracker;
  CONFIG.Combat.initiative = {
    formula: "1d20",
    decimals: 2
  };
  Actors.unregisterSheet("core", ActorSheet);
  Actors.registerSheet("mouseguard", MouseGuardNPCActorSheet, {
    types: ["mouse", "weasel", "animal"],
    makeDefault: true
  });
  console.log("Setting actor Sheet");
  Actors.registerSheet("mouseguard", MouseGuardActorSheet, {
    types: ["character"],
    makeDefault: true
  });
  Items.unregisterSheet("core", ItemSheet);
  Items.registerSheet("mouseguard", MouseGuardItemSheet, {
    makeDefault: true
  });
  game.settings.register("mouseguard", "macroShorthand", {
    name: "SETTINGS.MouseGuardMacroShorthandN",
    hint: "SETTINGS.MouseGuardMacroShorthandL",
    scope: "world",
    type: Boolean,
    default: true,
    config: true
  });
  game.settings.register("mouseguard", "initFormula", {
    name: "SETTINGS.MouseGuardInitFormulaN",
    hint: "SETTINGS.MouseGuardInitFormulaL",
    scope: "world",
    type: String,
    default: "1d20",
    config: true,
    onChange: (formula) => _simpleUpdateInit(formula, true)
  });
  const initFormula = game.settings.get("mouseguard", "initFormula");
  _simpleUpdateInit(initFormula);
  function _simpleUpdateInit(formula, notify = false) {
    const isValid = Roll.validate(formula);
    if (!isValid) {
      if (notify)
        ui.notifications.error(`${game.i18n.localize("MOUSEGUARD.NotifyInitFormulaInvalid")}: ${formula}`);
      return;
    }
    CONFIG.Combat.initiative.formula = formula;
  }
  Handlebars.registerHelper("slugify", function(value) {
    return value.slugify({ strict: true });
  });
  await preloadHandlebarsTemplates();
});
Hooks.once("init", async function() {
  CONFIG.Dice.terms["m"] = MouseDie;
  CONFIG.Dice.terms["6"] = MouseDie;
  game.socket.on("system.mouseguard", (data) => {
    if (data.action === "askGoal")
      MouseSocket.askGoal(data);
    if (data.action === "setGoal")
      MouseSocket.setGoal(data);
    if (data.action === "askMoves")
      MouseSocket.askMoves(data);
    if (data.action === "setMoves")
      MouseSocket.setMoves(data);
  });
  await registerTours();
});
Hooks.once("diceSoNiceReady", (dice3d) => {
  let dicetheme = "mouseguard";
  if (!dicetheme || dicetheme == "mouseguard") {
    dice3d.addSystem({ id: "mouseguard", name: "Mouse Guard" }, true);
    dice3d.addDicePreset({
      type: "dm",
      labels: [
        "systems/mouseguard/assets/dice/snake.png",
        "systems/mouseguard/assets/dice/snake.png",
        "systems/mouseguard/assets/dice/snake.png",
        "systems/mouseguard/assets/dice/sword.png",
        "systems/mouseguard/assets/dice/sword.png",
        "systems/mouseguard/assets/dice/axe.png"
      ],
      colorset: "white",
      system: "mouseguard"
    }, "d6");
  }
  dice3d.addColorset({
    name: "white-mg",
    description: "Mouse Guard white",
    category: "Colors",
    foreground: "#000000",
    background: "#ffffff",
    outline: "black",
    texture: "none",
    material: "plastic"
  });
});
Hooks.on("renderSidebarTab", (app, html, data) => {
  const template = "./systems/mouseguard/templates/mousetray.html";
  let $chat_form = html.find("#chat-form");
  renderTemplate(template).then((c) => {
    let $content = $(c);
    $chat_form.after($content);
    $content.find(".mouse_dice_button").on("click", (event) => {
      event.preventDefault();
      if (event.currentTarget.classList.contains("add")) {
        game.mouseguard.RollCount++;
      } else {
        game.mouseguard.RollCount--;
      }
      if (game.mouseguard.RollCount < 1)
        game.mouseguard.RollCount = 0;
      updateDisplay(game.mouseguard.RollCount);
    });
    $content.find(".mouse_roll_button").on("click", (event) => {
      event.preventDefault();
      let $self = $(event.currentTarget);
      let dataset = event.currentTarget.dataset;
      if (game.mouseguard.RollCount > 0) {
        let actor = game.user.character ?? canvas.tokens.controlled[0]?.actor;
        var roll = new MouseRoll(game.mouseguard.RollCount + "dmcs>3");
        roll.evaluate({ async: true });
        roll.toMessage({
          user: game.user.id,
          flavor: game.mouseguard.RollMessage,
          speaker: ChatMessage.getSpeaker({ actor })
        });
        game.mouseguard.RollCount = 0;
        game.mouseguard.RollMessage = "";
        updateDisplay(0);
      }
    });
    updateDisplay(game.mouseguard.RollCount);
  });
});
Hooks.once("ready", async () => {
  let tourRolls = game.user.getFlag("mouseguard", "tourRolls");
  if (tourRolls == void 0) {
    const tour = game.tours.get("mouseguard.welcome");
    tour.start();
    game.user.setFlag("mouseguard", "tourRolls", 1);
  }
});
async function registerTours() {
  try {
    game.tours.register("mouseguard", "welcome", await SidebarTour.fromJSON("/systems/mouseguard/tours/welcome.json"));
  } catch (err) {
    console.error(err);
  }
}
function updateDisplay(count) {
  let diceHTML = '<li class="roll mousedie d6"><img src="systems/mouseguard/assets/dice/sword.png" height="24" width="24"></li>';
  let theHTML = "";
  for (let i = 0; i < count; i++) {
    theHTML += diceHTML;
  }
  $(".mouse-dice-roll").html(theHTML);
  $(".mouse_dice_button.subtract").prop("disabled", !count);
  $(".mouse_roll_button").prop("disabled", !count);
  if (!count)
    game.mouseguard.RollMessage = "";
}
Handlebars.registerHelper("times", function(n, block) {
  var accum = "";
  for (var i = 0; i < n; ++i)
    accum += block.fn(i);
  return accum;
});
Handlebars.registerHelper("concat", function() {
  var outStr = "";
  for (var arg in arguments) {
    if (typeof arguments[arg] != "object") {
      outStr += arguments[arg];
    }
  }
  return outStr;
});
Handlebars.registerHelper("ifEquals", function(arg1, arg2, options) {
  return arg1 == arg2 ? options.fn(this) : options.inverse(this);
});
//# sourceMappingURL=mouseguard.js.map
